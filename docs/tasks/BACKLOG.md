# Task Backlog

**Last updated:** 2025-10-30T17:50:00Z

## Statistics

- **Total tasks:** 29
- **Completed:** 26/29 (90%)
- **In progress:** 1
- **Pending:** 2

## Tasks

### ‚úÖ TASK-001: –õ–æ–∫–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –Ω–∞–∑–≤–∞–Ω–∏—è –º–µ—Å—è—Ü–µ–≤ –≤ –∫–∞–ª–µ–Ω–¥–∞—Ä–µ

**Category:** bug | **Priority:** üü° medium | **Status:** done

**Complexity:** simple

–í –∫–∞–ª–µ–Ω–¥–∞—Ä–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –º–µ—Å—è—Ü–∞ –∏ –≥–æ–¥–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, '–æ–∫—Ç—è–±—Ä—å 2025 –≥.') –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –Ω–∞ —Ä—É—Å—Å–∫–æ–º —è–∑—ã–∫–µ –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ –æ—Ç –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ —è–∑—ã–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è. –ù—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏—é —á–µ—Ä–µ–∑ i18n –¥–ª—è —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –¥–∞—Ç –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–∏ —Å —Ç–µ–∫—É—â–∏–º —è–∑—ã–∫–æ–º (—Ä—É—Å—Å–∫–∏–π/–∞–Ω–≥–ª–∏–π—Å–∫–∏–π). –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤—Å–µ –º–µ—Å—Ç–∞ –≥–¥–µ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –Ω–∞–∑–≤–∞–Ω–∏—è –º–µ—Å—è—Ü–µ–≤ –∏ –æ–±–µ—Å–ø–µ—á–∏—Ç—å –∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω—É—é –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏—é.

**Tags:** i18n, localization, calendar, ui

**Related files:**
- src/components/ModernNastiaApp.tsx
- src/components/CycleLengthChart.tsx
- src/utils/dateUtils.ts

**Notes:** –°–∫—Ä–∏–Ω—à–æ—Ç –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç '–æ–∫—Ç—è–±—Ä—å 2025 –≥.' - –Ω—É–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å toLocaleString –∏–ª–∏ i18n.language –¥–ª—è —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

---

### ‚úÖ TASK-002: –ò—Å–ø—Ä–∞–≤–∏—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∑–∞—Ö–∞—Ä–¥–∫–æ–∂–µ–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –ø–∞—Ä—Ç–Ω—ë—Ä–∞ –≤–º–µ—Å—Ç–æ –ë–î

**Category:** bug | **Priority:** üî¥ critical | **Status:** done

**Complexity:** complex

–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π –±–∞–≥: –∏–º—è –ø–∞—Ä—Ç–Ω—ë—Ä–∞ '–°–µ—Ä–≥–µ–π' –∑–∞—Ö–∞—Ä–¥–∫–æ–∂–µ–Ω–æ –≤ 19 —Ñ–∞–π–ª–∞—Ö. AI-–ø—Ä–æ–º–ø—Ç—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π –ø—Ä–æ—Ñ–∏–ª—å getCurrentUser() –≤–º–µ—Å—Ç–æ —Ä–µ–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –∏–∑ Supabase (—Ç–∞–±–ª–∏—Ü–∞ partners). –î–∞–∂–µ –ø–æ—Å–ª–µ —É–¥–∞–ª–µ–Ω–∏—è –ø–∞—Ä—Ç–Ω—ë—Ä–∞ –≤ –ë–î –∏–º—è –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –∏–∑ src/data/userProfile.ts. –ö—Ä–∏—Ç–∏—á–Ω—ã–µ —Ñ–∞–π–ª—ã: cyclePrompt.ts (6 –≤—Ö–æ–∂–¥–µ–Ω–∏–π 'Sergey'), horoscope.ts (6 —Ñ—É–Ω–∫—Ü–∏–π), ModernNastiaApp.tsx (–Ω–µ –ø–µ—Ä–µ–¥–∞—ë—Ç userPartner). –¢—Ä–µ–±—É–µ—Ç—Å—è: —Å–æ–∑–¥–∞—Ç—å —É—Ç–∏–ª–∏—Ç—É userContext.ts –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –ø–∞—Ä—Ç–Ω—ë—Ä–∞ –∏–∑ –ë–î, —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ AI-–ø—Ä–æ–º–ø—Ç–æ–≤ (horoscope.ts, historyStory.ts, cyclePrompt.ts), –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ ModernNastiaApp.tsx –¥–ª—è –ø–µ—Ä–µ–¥–∞—á–∏ userPartner –≤ AI-—Ñ—É–Ω–∫—Ü–∏–∏.

**Tags:** ai, database, personalization, partner, hardcoded-data

**Related files:**
- src/utils/prompts/cyclePrompt.ts
- src/utils/horoscope.ts
- src/utils/historyStory.ts
- src/components/ModernNastiaApp.tsx
- src/data/userProfile.ts

**Notes:** –ü–ª–∞–Ω –∏–∑ 7 –ø–æ–¥–∑–∞–¥–∞—á: 1) ‚úÖ –ê—É–¥–∏—Ç (–≤—ã–ø–æ–ª–Ω–µ–Ω), 2) ‚úÖ –ò—Å–ø—Ä–∞–≤–∏—Ç—å cyclePrompt.ts, 3) ‚úÖ –°–æ–∑–¥–∞—Ç—å userContext.ts, 4) ‚úÖ –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ horoscope.ts, 5) ‚úÖ –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ historyStory.ts, 6) ‚úÖ –û–±–Ω–æ–≤–∏—Ç—å ModernNastiaApp.tsx, 7) ‚úÖ –ü—Ä–æ–µ–∫—Ç —É—Å–ø–µ—à–Ω–æ —Å–æ–±—Ä–∞–Ω

---

### ‚úÖ TASK-003: –ü–æ–ª–Ω–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ getCurrentUser() –∏–∑ horoscope.ts

**Category:** refactor | **Priority:** üî¥ critical | **Status:** done

**Complexity:** moderate

–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥: –≤ horoscope.ts –æ—Å—Ç–∞–ª–∏—Å—å 16 –≤—ã–∑–æ–≤–æ–≤ getCurrentUser(), –∫–æ—Ç–æ—Ä—ã–π –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∑–∞—Ö–∞—Ä–¥–∫–æ–∂–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ —Å –∏–º–µ–Ω–µ–º '–°–µ—Ä–≥–µ–π' –≤–º–µ—Å—Ç–æ —Ä–µ–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –∏–∑ Supabase. –ù–µ–æ–±—Ö–æ–¥–∏–º–æ –∑–∞–º–µ–Ω–∏—Ç—å –≤—Å–µ –≤—ã–∑–æ–≤—ã –Ω–∞ getUserName(userProfile) / getPartnerName(userPartner), –¥–æ–±–∞–≤–∏—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä—ã userProfile/userPartner –≤–æ –≤—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ (buildSergeyDailyPrompt, buildDailyPrompt, buildWeeklyPrompt –∏ –¥—Ä.), –æ–±–Ω–æ–≤–∏—Ç—å –≤—ã–∑–æ–≤—ã —ç—Ç–∏—Ö —Ñ—É–Ω–∫—Ü–∏–π –¥–ª—è –ø–µ—Ä–µ–¥–∞—á–∏ —Ä–µ–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö.

**Tags:** refactor, horoscope, ai, hardcoded-data, partner

**Related files:**
- src/utils/horoscope.ts

**Notes:** ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–æ: –û–±–Ω–æ–≤–ª–µ–Ω–æ 12 —Ñ—É–Ω–∫—Ü–∏–π, —É–¥–∞–ª–µ–Ω–æ 13 –≤—ã–∑–æ–≤–æ–≤ getCurrentUser() (–æ—Å—Ç–∞–ª–∏—Å—å —Ç–æ–ª—å–∫–æ fallback), –¥–æ–±–∞–≤–ª–µ–Ω–æ 18 –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ userProfile/userPartner. –ë–∏–ª–¥ —É—Å–ø–µ—à–µ–Ω. –§—É–Ω–∫—Ü–∏–∏: buildDailyMemoryReminders, buildSergeyMemoryReminders, buildUserContext, buildPartnerContext, buildHoroscopeSystemPrompt, buildPartnerSystemPrompt, buildWeeklyPrompt, buildDailyPrompt, buildSergeyDailyPrompt, getFallbackHoroscopeText, fetchHoroscopeLoadingMessages, fetchSergeyLoadingMessages.

---

### ‚úÖ TASK-004: –£–¥–∞–ª–µ–Ω–∏–µ getCurrentUser() –∏–∑ historyStory.ts

**Category:** refactor | **Priority:** üî¥ critical | **Status:** done

**Complexity:** simple

–í historyStory.ts –æ—Å—Ç–∞–ª–∏—Å—å 5 –≤—ã–∑–æ–≤–æ–≤ getCurrentUser(), –∫–æ—Ç–æ—Ä—ã–µ –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç –∑–∞—Ö–∞—Ä–¥–∫–æ–∂–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –≤–º–µ—Å—Ç–æ —Ä–µ–∞–ª—å–Ω—ã—Ö –∏–∑ Supabase. –ù–µ–æ–±—Ö–æ–¥–∏–º–æ –¥–æ–±–∞–≤–∏—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä—ã userProfile/userPartner –≤–æ –≤—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã—Ö –∏—Å—Ç–æ—Ä–∏–π, –æ–±–Ω–æ–≤–∏—Ç—å –≤—ã–∑–æ–≤—ã –≤ ModernNastiaApp.tsx (DiscoverTab), –∑–∞–º–µ–Ω–∏—Ç—å getCurrentUser().name –Ω–∞ getUserName(userProfile).

**Tags:** refactor, interactive-story, ai, hardcoded-data

**Related files:**
- src/utils/historyStory.ts
- src/components/ModernNastiaApp.tsx

**Notes:** ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–æ: –û–±–Ω–æ–≤–ª–µ–Ω–æ 13 —Ñ—É–Ω–∫—Ü–∏–π, —É–¥–∞–ª–µ–Ω–æ 8 –≤—ã–∑–æ–≤–æ–≤ getCurrentUser() (–æ—Å—Ç–∞–ª–∏—Å—å 2 fallback), –¥–æ–±–∞–≤–ª–µ–Ω–æ 26 –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ userProfile/userPartner. –ë–∏–ª–∫ —É—Å–ø–µ—à–µ–Ω. –§—É–Ω–∫—Ü–∏–∏: getUserProfile, getUserChartAnalysis, getUserBirthDataText, getUserChartAnalysisText, generatePsychContractContext, ensurePsychContractContext, buildStorySoFar, buildInputDataBlock, buildArcPrompt, buildFinalePrompt, generateHistoryStoryChunk (export), CustomHistoryOptionRequest (interface), generateCustomHistoryOption (export). –ò–º–ø–æ—Ä—Ç getPartnerName –¥–æ–±–∞–≤–ª–µ–Ω (—Å—Ç—Ä–æ–∫–∞ 9).

---

### ‚úÖ TASK-005: –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ userPartner –∏–∑ Supabase

**Category:** bug | **Priority:** üü† high | **Status:** done

**Complexity:** simple

–ù–µ–æ–±—Ö–æ–¥–∏–º–æ —É–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ userPartner –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –∏–∑ Supabase –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –∏ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ state –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ ModernNastiaApp. –î–æ–±–∞–≤–∏—Ç—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–≥—Ä—É–∑–∫–∏ –ø–∞—Ä—Ç–Ω–µ—Ä–∞, –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –≤—ã–∑–æ–≤ getPartner() –∏–∑ supabaseProfile.ts, –¥–æ–±–∞–≤–∏—Ç—å error handling –¥–ª—è —Å–ª—É—á–∞–µ–≤ –∫–æ–≥–¥–∞ –ø–∞—Ä—Ç–Ω–µ—Ä –Ω–µ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è. –ï—Å–ª–∏ –ø–∞—Ä—Ç–Ω–µ—Ä —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –≤ –ë–î –Ω–æ –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –≤ Settings - –ø—Ä–æ–±–ª–µ–º–∞ –∏–º–µ–Ω–Ω–æ –∑–¥–µ—Å—å.

**Tags:** bug, partner, database, supabase

**Related files:**
- src/components/ModernNastiaApp.tsx
- src/utils/supabaseProfile.ts

**Notes:** ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–æ: –ü—Ä–æ–≤–µ—Ä–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è loadUserProfileData() - –ø–∞—Ä—Ç–Ω—ë—Ä –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —á–µ—Ä–µ–∑ fetchPartner(), —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ state —á–µ—Ä–µ–∑ setUserPartner(partner). –î–æ–±–∞–≤–ª–µ–Ω–æ –¥–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ: console.log('üìä Partner loaded:', { hasPartner: !!partner, partnerName: partner?.name, partnerId: partner?.id }). Error handling –£–ñ–ï –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π - fetchPartner() –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç null –µ—Å–ª–∏ –ø–∞—Ä—Ç–Ω—ë—Ä–∞ –Ω–µ—Ç (–∫–æ–¥ PGRST116), —á—Ç–æ —è–≤–ª—è–µ—Ç—Å—è –Ω–æ—Ä–º–∞–ª—å–Ω–æ–π —Å–∏—Ç—É–∞—Ü–∏–µ–π. State –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ. –ë–∏–ª–¥ —É—Å–ø–µ—à–µ–Ω (455.48 kB, +61 B).

---

### ‚úÖ TASK-006: –ü–µ—Ä–µ–¥–∞—á–∞ userProfile/userPartner –≤–æ –í–°–ï AI-—Ñ—É–Ω–∫—Ü–∏–∏

**Category:** refactor | **Priority:** üü† high | **Status:** done

**Complexity:** moderate

–ì–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–µ—Ä–µ–¥–∞—á—É —Ä–µ–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (userProfile/userPartner) –≤–æ –≤—Å–µ AI-—Ñ—É–Ω–∫—Ü–∏–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è. –ù–∞–π—Ç–∏ –≤—Å–µ –≤—ã–∑–æ–≤—ã fetchSergeyDailyHoroscopeForDate(), fetchSergeyBannerCopy(), fetchDailyHoroscope(), fetchWeeklyHoroscope(), generateInteractiveStory() –≤ ModernNastiaApp.tsx –∏ —É–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ –≤–µ–∑–¥–µ –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è userProfile –∏ userPartner. –î–æ–±–∞–≤–∏—Ç—å fallback –Ω–∞ –ø—É—Å—Ç—ã–µ —Å—Ç—Ä–æ–∫–∏ –µ—Å–ª–∏ –¥–∞–Ω–Ω—ã—Ö –Ω–µ—Ç.

**Tags:** refactor, ai, partner, horoscope

**Related files:**
- src/components/ModernNastiaApp.tsx
- src/utils/horoscope.ts

**Notes:** ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–æ: –û–±–Ω–æ–≤–ª–µ–Ω–∞ —Å–∏–≥–Ω–∞—Ç—É—Ä–∞ fetchDailyHoroscope (–¥–æ–±–∞–≤–ª–µ–Ω—ã –ø–∞—Ä–∞–º–µ—Ç—Ä—ã userProfile/userPartner). –û–±–Ω–æ–≤–ª–µ–Ω–æ 4 –≤—ã–∑–æ–≤–∞ AI-—Ñ—É–Ω–∫—Ü–∏–π –≤ ModernNastiaApp.tsx: fetchDailyHoroscope (line 3293), generateHistoryStoryChunk arc mode (line 954), generateHistoryStoryChunk finale mode (line 1077), generateCustomHistoryOption (line 1646). –§—É–Ω–∫—Ü–∏–∏ fetchSergeyBannerCopy –∏ fetchSergeyDailyHoroscopeForDate —É–∂–µ –ø–µ—Ä–µ–¥–∞–≤–∞–ª–∏ —ç—Ç–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã. –ë–∏–ª–¥ —É—Å–ø–µ—à–µ–Ω (455.42 kB, +9 B). ‚ö†Ô∏è ESLint warnings –æ dependency arrays (–Ω–µ –∫—Ä–∏—Ç–∏—á–Ω–æ).

---

### ‚úÖ TASK-007: –ê—Ä—Ö–∏–≤–∞—Ü–∏—è —É—Å—Ç–∞—Ä–µ–≤—à–µ–≥–æ userProfile.ts

**Category:** chore | **Priority:** üü° medium | **Status:** done

**Complexity:** trivial

–ü–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞—Ç—å src/data/userProfile.ts –≤ userProfile.deprecated.ts –∏ –¥–æ–±–∞–≤–∏—Ç—å –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–∞—é—â–∏–π –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –æ —Ç–æ–º, —á—Ç–æ —Ñ–∞–π–ª —É—Å—Ç–∞—Ä–µ–ª –∏ —Å–æ–¥–µ—Ä–∂–∏—Ç —Ç–æ–ª—å–∫–æ hardcoded –¥–∞–Ω–Ω—ã–µ –¥–ª—è legacy —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏. –£–¥–∞–ª–∏—Ç—å –≤—Å–µ –∏–º–ø–æ—Ä—Ç—ã –∏–∑ –¥—Ä—É–≥–∏—Ö —Ñ–∞–π–ª–æ–≤ –ø–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è TASK-003 –∏ TASK-004. –≠—Ç–æ –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—Ç–∏—Ç —Å–ª—É—á–∞–π–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∑–∞—Ö–∞—Ä–¥–∫–æ–∂–µ–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –≤ –±—É–¥—É—â–µ–º.

**Tags:** chore, refactor, cleanup, deprecated

**Related files:**
- src/data/userProfile.deprecated.ts
- src/utils/horoscope.ts
- src/utils/historyStory.ts

**Notes:** ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–æ: –§–∞–π–ª –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω –≤ userProfile.deprecated.ts —Å –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ–º –±–æ–ª—å—à–æ–≥–æ warning –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è (‚ö†Ô∏è DEPRECATED - DO NOT USE! Use src/utils/userContext.ts). –û–±–Ω–æ–≤–ª–µ–Ω—ã –∏–º–ø–æ—Ä—Ç—ã –≤ horoscope.ts (line 6) –∏ historyStory.ts (line 7). –í—Å–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã –∏ —Ñ—É–Ω–∫—Ü–∏–∏ –ø–æ–º–µ—á–µ–Ω—ã –∫–∞–∫ @deprecated. –ë–∏–ª–¥ —É—Å–ø–µ—à–µ–Ω (455.42 kB). –§–∞–π–ª —Å–æ—Ö—Ä–∞–Ω—ë–Ω —Ç–æ–ª—å–∫–æ –¥–ª—è fallback —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏.

---

### ‚úÖ TASK-008: –î–æ–±–∞–≤–∏—Ç—å —Ç–µ—Å—Ç—ã –¥–ª—è –ø–∞—Ä—Ç–Ω–µ—Ä—Å–∫–∏—Ö —Ñ—É–Ω–∫—Ü–∏–π

**Category:** test | **Priority:** üü° medium | **Status:** done

**Complexity:** moderate

–ù–∞–ø–∏—Å–∞—Ç—å unit-—Ç–µ—Å—Ç—ã –¥–ª—è —Ñ—É–Ω–∫—Ü–∏–π —Ä–∞–±–æ—Ç—ã —Å –¥–∞–Ω–Ω—ã–º–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏ –ø–∞—Ä—Ç–Ω–µ—Ä–∞. –°–æ–∑–¥–∞—Ç—å horoscope.test.ts –∏ userContext.test.ts, –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å getUserName() –∏ getPartnerName() —Å —Ä–∞–∑–ª–∏—á–Ω—ã–º–∏ —Å—Ü–µ–Ω–∞—Ä–∏—è–º–∏ (–ø–∞—Ä—Ç–Ω–µ—Ä —Å—É—â–µ—Å—Ç–≤—É–µ—Ç, –ø–∞—Ä—Ç–Ω–µ—Ä null, fallback –Ω–∞ –¥–µ—Ñ–æ–ª—Ç–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è). –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ–º–ø—Ç—ã —Å userProfile/userPartner, —É–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ hardcoded '–°–µ—Ä–≥–µ–π' –Ω–µ –ø–æ—è–≤–ª—è–µ—Ç—Å—è –Ω–∏–≥–¥–µ.

**Tags:** test, partner, unit-tests, quality

**Related files:**
- src/utils/userContext.test.ts

**Notes:** ‚úÖ –ó–∞–≤–µ—Ä—à–µ–Ω–æ: –°–æ–∑–¥–∞–Ω userContext.test.ts —Å 30 unit-—Ç–µ—Å—Ç–∞–º–∏ –ø–æ–∫—Ä—ã–≤–∞—é—â–∏–º–∏ –≤—Å–µ helper-—Ñ—É–Ω–∫—Ü–∏–∏. –¢–µ—Å—Ç—ã –ø—Ä–æ–≤–µ—Ä—è—é—Ç: getUserName()/getPartnerName() —Å universal defaults (–ø—É—Å—Ç—ã–µ —Å—Ç—Ä–æ–∫–∏, –ë–ï–ó hardcoded '–ù–∞—Å—Ç—è'/'–°–µ—Ä–≥–µ–π'), hasPartner() —Ç—Ä–µ–±—É–µ—Ç name AND birth_date –¥–ª—è –∞—Å—Ç—Ä–æ–ª–æ–≥–∏–∏, hasLocationAccess() privacy-first default (false), getUserCoordinates() –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç null –µ—Å–ª–∏ –¥–æ—Å—Ç—É–ø –∑–∞–ø—Ä–µ—â—ë–Ω, isCycleTrackingEnabled() default true –¥–ª—è backward compatibility. –í—Å–µ 30 —Ç–µ—Å—Ç–æ–≤ –ø—Ä–æ—à–ª–∏ —É—Å–ø–µ—à–Ω–æ. TypeScript –∫–æ–º–ø–∏–ª—è—Ü–∏—è —É—Å–ø–µ—à–Ω–∞. –ö–æ–º–º–∏—Ç ed57144. Universal app - –Ω–∏–∫–∞–∫–∏—Ö –∑–∞—Ö–∞—Ä–¥–∫–æ–∂–µ–Ω–Ω—ã—Ö –∏–º—ë–Ω.

---

### ‚úÖ TASK-009: UI —Ñ–∏–¥–±–µ–∫ –ø—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ –ø–∞—Ä—Ç–Ω–µ—Ä–∞

**Category:** ui | **Priority:** üü° medium | **Status:** done

**Complexity:** simple

–£–ª—É—á—à–∏—Ç—å UX –∫–æ–≥–¥–∞ —É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –Ω–µ—Ç –ø–∞—Ä—Ç–Ω–µ—Ä–∞ –≤ –ø—Ä–æ—Ñ–∏–ª–µ. –í –±–∞–Ω–Ω–µ—Ä–µ '–ß—Ç–æ —Ç–∞–º —É –ø–∞—Ä—Ç–Ω–µ—Ä–∞?' –ø—Ä–æ–≤–µ—Ä—è—Ç—å userPartner === null –∏ –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å —Ç–µ–∫—Å—Ç '–î–æ–±–∞–≤—å—Ç–µ –ø–∞—Ä—Ç–Ω–µ—Ä–∞ –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö, —á—Ç–æ–±—ã —É–≤–∏–¥–µ—Ç—å —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å' —Å –∫–Ω–æ–ø–∫–æ–π '–î–æ–±–∞–≤–∏—Ç—å –ø–∞—Ä—Ç–Ω–µ—Ä–∞' –∫–æ—Ç–æ—Ä–∞—è –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç Settings ‚Üí ProfileSetupModal. –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ: —Å–∫—Ä—ã—Ç—å –±–∞–Ω–Ω–µ—Ä –ø–æ–ª–Ω–æ—Å—Ç—å—é –µ—Å–ª–∏ –ø–∞—Ä—Ç–Ω–µ—Ä –Ω–µ –Ω—É–∂–µ–Ω.

**Tags:** ui, ux, partner, feedback

**Related files:**
- src/components/ModernNastiaApp.tsx

**Notes:** ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–æ: –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ userPartner –≤ —É—Å–ª–æ–≤–∏–µ –ø–æ–∫–∞–∑–∞ –±–∞–Ω–Ω–µ—Ä–∞ –ø–∞—Ä—Ç–Ω—ë—Ä–∞ (ModernNastiaApp.tsx:5258). –ë–∞–Ω–Ω–µ—Ä —Ç–µ–ø–µ—Ä—å —Å–∫—Ä—ã—Ç –µ—Å–ª–∏ –ø–∞—Ä—Ç–Ω—ë—Ä–∞ –Ω–µ—Ç –≤ –ë–î. –ò–∑–º–µ–Ω–µ–Ω–∏–µ: {activeTab === 'calendar' && !sergeyBannerDismissed && userPartner && (. –ë–∏–ª–∫ —É—Å–ø–µ—à–µ–Ω (455.49 kB, +1 B). –†–µ—à–∞–µ—Ç –≤–æ–ø—Ä–æ—Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è - –±–∞–Ω–Ω–µ—Ä –±–æ–ª—å—à–µ –Ω–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –∫–æ–≥–¥–∞ –ø–∞—Ä—Ç–Ω—ë—Ä–∞ –Ω–µ—Ç!

---

### ‚úÖ TASK-010: –û–±–Ω–æ–≤–∏—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é CLAUDE.md

**Category:** docs | **Priority:** üü° medium | **Status:** done

**Complexity:** trivial

–ê–∫—Ç—É–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å CLAUDE.md –ø–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞ –ø–∞—Ä—Ç–Ω–µ—Ä—Å–∫–∏—Ö —Ñ—É–Ω–∫—Ü–∏–π. –£–¥–∞–ª–∏—Ç—å —É–ø–æ–º–∏–Ω–∞–Ω–∏—è userProfile.ts –∫–∞–∫ –∏—Å—Ç–æ—á–Ω–∏–∫–∞ –¥–∞–Ω–Ω—ã—Ö, –¥–æ–±–∞–≤–∏—Ç—å —Å–µ–∫—Ü–∏—é '–†–∞–±–æ—Ç–∞ —Å –¥–∞–Ω–Ω—ã–º–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è' —Å –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å userContext.ts –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –∏–∑ Supabase, –≤—Å–µ–≥–¥–∞ –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å userProfile/userPartner –≤ AI-—Ñ—É–Ω–∫—Ü–∏–∏, –Ω–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å getCurrentUser() (deprecated). –û–±–Ω–æ–≤–∏—Ç—å –ø—Ä–∏–º–µ—Ä—ã –∫–æ–¥–∞.

**Tags:** docs, documentation, refactor

**Related files:**
- CLAUDE.md

**Notes:** ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–æ: –î–æ–±–∞–≤–ª–µ–Ω–∞ –Ω–æ–≤–∞—è —Å–µ–∫—Ü–∏—è 'Working with User Data' (~142 —Å—Ç—Ä–æ–∫–∏) –ø–æ—Å–ª–µ 'Data Flow & Storage' –≤ CLAUDE.md. –í–∫–ª—é—á–∞–µ—Ç: User Data Architecture, userContext.ts Helper Functions (—Å –ø—Ä–∏–º–µ—Ä–∞–º–∏ –∫–æ–¥–∞), Proper Usage Pattern (‚úÖ –ø—Ä–∞–≤–∏–ª—å–Ω–æ / ‚ùå –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ), Migration Guide (4 —à–∞–≥–∞), Deprecated Files (–ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –æ userProfile.deprecated.ts), Why This Matters (–æ–±—ä—è—Å–Ω–µ–Ω–∏–µ –≤–∞–∂–Ω–æ—Å—Ç–∏). –ü—Ä–∏–º–µ—Ä—ã –∫–æ–¥–∞ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω—É—é –ø–µ—Ä–µ–¥–∞—á—É userProfile/userPartner –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤, –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ getUserName()/getPartnerName(), –ø–∞—Ç—Ç–µ—Ä–Ω optional –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ —Å fallback.

---

### ‚úÖ TASK-011: –ò—Å–ø—Ä–∞–≤–∏—Ç—å –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏—é –¥–∞—Ç –≤ –Ω–µ–¥–µ–ª—å–Ω–æ–º –≥–æ—Ä–æ—Å–∫–æ–ø–µ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ –ø–µ—Ä–∏–æ–¥–∞

**Category:** bug | **Priority:** üü† high | **Status:** done

**Complexity:** simple

–í –º–æ–¥–∞–ª—å–Ω–æ–º –æ–∫–Ω–µ –Ω–æ–≤–æ–π –º–µ–Ω—Å—Ç—Ä—É–∞—Ü–∏–∏ –Ω–µ–¥–µ–ª—å–Ω—ã–π –≥–æ—Ä–æ—Å–∫–æ–ø –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –¥–∞—Ç—ã –≤—Å–µ–≥–¥–∞ –Ω–∞ —Ä—É—Å—Å–∫–æ–º —è–∑—ã–∫–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä '29 –æ–∫—Ç—è–±—Ä—è ‚Äî 4 –Ω–æ—è–±—Ä—è'), –¥–∞–∂–µ –µ—Å–ª–∏ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω –Ω–∞ –Ω–µ–º–µ—Ü–∫–∏–π/–∞–Ω–≥–ª–∏–π—Å–∫–∏–π –∏–ª–∏ –¥—Ä—É–≥–∏–µ —è–∑—ã–∫–∏. –î–∞—Ç—ã –¥–æ–ª–∂–Ω—ã —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞—Ç—å—Å—è —Å–æ–≥–ª–∞—Å–Ω–æ —Ç–µ–∫—É—â–µ–π –ª–æ–∫–∞–ª–∏ (i18n.language). –ë–∞–≥ –≤–∏–¥–Ω–æ –ø—Ä–∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ —Å —Ä–∞–∑–Ω—ã–º–∏ —è–∑—ã–∫–∞–º–∏ - –¥–∏–∞–ø–∞–∑–æ–Ω –¥–∞—Ç –≤ –≥–æ—Ä–æ—Å–∫–æ–ø–µ –Ω–µ –ª–æ–∫–∞–ª–∏–∑—É–µ—Ç—Å—è. –ù—É–∂–Ω–æ –Ω–∞–π—Ç–∏ –º–µ—Å—Ç–æ –≥–¥–µ –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è –∑–∞–≥–æ–ª–æ–≤–∫–∏ –¥–ª—è –Ω–µ–¥–µ–ª—å–Ω–æ–≥–æ –≥–æ—Ä–æ—Å–∫–æ–ø–∞ (—Å–∫–æ—Ä–µ–µ –≤—Å–µ–≥–æ –≤ horoscope.ts) –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞—Ç—ã –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —è–∑—ã–∫–∞.

**Tags:** i18n, localization, date-formatting, modal, horoscope

**Related files:**
- src/utils/horoscope.ts
- src/utils/dateUtils.ts
- src/components/ModernNastiaApp.tsx

**Notes:** ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–æ: –î–æ–±–∞–≤–ª–µ–Ω –ø–∞—Ä–∞–º–µ—Ç—Ä language –≤ getWeekRange(), –º–∞–ø–ø–∏–Ω–≥ –ª–æ–∫–∞–ª–µ–π (ru‚Üíru-RU, en‚Üíen-US, de‚Üíde-DE), –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω Intl.DateTimeFormat —Å –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –ª–æ–∫–∞–ª—å—é. –û–±–Ω–æ–≤–ª–µ–Ω—ã –≤—ã–∑–æ–≤—ã –≤ buildWeeklyPrompt() (—Å—Ç—Ä–æ–∫–∞ 676) –∏ fetchDailyHoroscope() (—Å—Ç—Ä–æ–∫–∞ 1052). –ë–∏–ª–¥ —É—Å–ø–µ—à–µ–Ω (454.96 kB, +4 B). –í–µ—Ä—Å–∏—è 0.3.8 –∑–∞–¥–µ–ø–ª–æ–µ–Ω–∞ –Ω–∞ GitHub Pages. –§–æ—Ä–º–∞—Ç—ã: —Ä—É—Å—Å–∫–∏–π '29 –æ–∫—Ç—è–±—Ä—è ‚Äî 4 –Ω–æ—è–±—Ä—è', –∞–Ω–≥–ª–∏–π—Å–∫–∏–π '29 October ‚Äî 4 November', –Ω–µ–º–µ—Ü–∫–∏–π '29 Oktober ‚Äî 4 November'.

---

### ‚úÖ TASK-012: –£–±—Ä–∞—Ç—å –∑–∞—Ö–∞—Ä–¥–∫–æ–∂–µ–Ω–Ω–æ–µ –∏–º—è '–ù–∞—Å—Ç—è' –∏–∑ AI-—Ñ—Ä–∞–∑ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ –ø–µ—Ä–∏–æ–¥–∞

**Category:** bug | **Priority:** üü° medium | **Status:** done

**Complexity:** simple

–í –º–æ–¥–∞–ª—å–Ω–æ–º –æ–∫–Ω–µ –Ω–∞—á–∞–ª–∞ –º–µ–Ω—Å—Ç—Ä—É–∞—Ü–∏–∏ AI –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —Ñ—Ä–∞–∑—ã —Å –∑–∞—Ö–∞—Ä–¥–∫–æ–∂–µ–Ω–Ω—ã–º –∏–º–µ–Ω–µ–º '–ù–∞—Å—Ç—è' –≤–º–µ—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Ä–µ–∞–ª—å–Ω–æ–≥–æ –∏–º–µ–Ω–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏–∑ userProfile.display_name. –ù–∞–ø—Ä–∏–º–µ—Ä: '–ü—Ä–∏–≤–µ—Ç, –ù–∞—Å—Ç—è! –¢–≤–æ–π —Ü–∏–∫–ª –Ω–∞—á–∞–ª—Å—è...' –≤–º–µ—Å—Ç–æ '–ü—Ä–∏–≤–µ—Ç, {userName}! –¢–≤–æ–π —Ü–∏–∫–ª –Ω–∞—á–∞–ª—Å—è...'. –≠—Ç–æ –æ—Å—Ç–∞—Ç–æ–∫ –æ—Ç TASK-002 (—É–Ω–∏–≤–µ—Ä—Å–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–æ–º–ø—Ç–æ–≤) - –≤–∏–¥–∏–º–æ, —Ñ—É–Ω–∫—Ü–∏—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∫–æ–Ω—Ç–µ–Ω—Ç–∞ –¥–ª—è –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ –ø–µ—Ä–∏–æ–¥–∞ (—Å–∫–æ—Ä–µ–µ –≤—Å–µ–≥–æ –≤ src/utils/aiContent.ts –∏–ª–∏ –≤—ã–∑–æ–≤ –∏–∑ ModernNastiaApp.tsx) –Ω–µ –ø–æ–ª—É—á–∞–µ—Ç userProfile/userPartner –≤ –∫–∞—á–µ—Å—Ç–≤–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤. –ù—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä—ã userProfile/userPartner –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å getUserName() –∏–∑ userContext.ts –¥–ª—è –ø–æ–¥—Å—Ç–∞–Ω–æ–≤–∫–∏ —Ä–µ–∞–ª—å–Ω–æ–≥–æ –∏–º–µ–Ω–∏ –≤ –ø—Ä–æ–º–ø—Ç—ã.

**Tags:** ai, personalization, modal, hardcoded-data, user-profile

**Related files:**
- src/utils/aiContent.ts
- src/components/ModernNastiaApp.tsx
- src/utils/userContext.ts

**Notes:** ‚úÖ –ó–∞–≤–µ—Ä—à–µ–Ω–æ: 1) aiContent.ts - –¥–æ–±–∞–≤–ª–µ–Ω import UserProfileData/PartnerData, —Ä–∞—Å—à–∏—Ä–µ–Ω GeneratePeriodContentOptions –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å (userProfile/userPartner –ø–∞—Ä–∞–º–µ—Ç—Ä—ã), —Ñ—É–Ω–∫—Ü–∏—è generatePeriodModalContent() –∏—Å–ø–æ–ª—å–∑—É–µ—Ç getUserName(userProfile) –¥–ª—è fallback, 2) –ò—Å–ø—Ä–∞–≤–ª–µ–Ω hardcoded —Ç–µ–∫—Å—Ç '–æ–ø–∏—Ä–∞–π—Å—è –Ω–∞ –æ—â—É—â–µ–Ω–∏—è –ù–∞—Å—Ç–∏' ‚Üí '–æ–ø–∏—Ä–∞–π—Å—è –Ω–∞ —Å–≤–æ–∏ –æ—â—É—â–µ–Ω–∏—è' (line 153), 3) ModernNastiaApp.tsx - –≤—ã–∑–æ–≤ generatePeriodModalContent() –æ–±–Ω–æ–≤–ª—ë–Ω: –¥–æ–±–∞–≤–ª–µ–Ω—ã userProfile –∏ userPartner –ø–∞—Ä–∞–º–µ—Ç—Ä—ã (line 3280-3281), 4) TypeScript –∫–æ–º–ø–∏–ª—è—Ü–∏—è —É—Å–ø–µ—à–Ω–∞. –¢–µ–ø–µ—Ä—å –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –ø–µ—Ä–∏–æ–¥–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Ä–µ–∞–ª—å–Ω–æ–µ –∏–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏–∑ Supabase –≤–º–µ—Å—Ç–æ –∑–∞—Ö–∞—Ä–¥–∫–æ–∂–µ–Ω–Ω–æ–≥–æ '–ù–∞—Å—Ç—è'. –ö–æ–º–º–∏—Ç bf4e5f9.

---

### ‚úÖ TASK-013: –î–æ–±–∞–≤–∏—Ç—å location_access –∏ cycle_tracking_enabled –≤ users —Ç–∞–±–ª–∏—Ü—É

**Category:** chore | **Priority:** üü† high | **Status:** done

**Complexity:** moderate

–ú–∏–≥—Ä–∞—Ü–∏—è –ë–î –¥–ª—è Phase 1: –¥–æ–±–∞–≤–∏—Ç—å –¥–≤–∞ –Ω–æ–≤—ã—Ö boolean –ø–æ–ª—è –≤ —Ç–∞–±–ª–∏—Ü—É users. location_access_enabled (DEFAULT FALSE) - —Ñ–ª–∞–≥ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è –Ω–∞ –¥–æ—Å—Ç—É–ø –∫ –≥–µ–æ–ª–æ–∫–∞—Ü–∏–∏. cycle_tracking_enabled (DEFAULT TRUE) - —Ñ–ª–∞–≥ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –º–µ–Ω—Å—Ç—Ä—É–∞–ª—å–Ω–æ–≥–æ —Ü–∏–∫–ª–∞. –û–±–Ω–æ–≤–∏—Ç—å TypeScript —Ç–∏–ø—ã UserProfileData –∏ UserProfileRow –≤ src/types/index.ts. –î–æ–±–∞–≤–∏—Ç—å —Ñ—É–Ω–∫—Ü–∏–∏ updateLocationAccess() –∏ updateCycleTracking() –≤ src/utils/supabaseProfile.ts –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è —ç—Ç–∏—Ö —Ñ–ª–∞–≥–æ–≤. SQL –º–∏–≥—Ä–∞—Ü–∏—è –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è —á–µ—Ä–µ–∑ Supabase Dashboard.

**Tags:** database, migration, typescript, supabase, infrastructure

**Related files:**
- src/types/index.ts
- src/utils/supabaseProfile.ts
- src/utils/userContext.ts
- migrations/add_user_settings_columns.sql

**Notes:** ‚úÖ –ó–∞–≤–µ—Ä—à–µ–Ω–æ: 1) SQL –º–∏–≥—Ä–∞—Ü–∏—è —Å–æ–∑–¥–∞–Ω–∞ –∏ –ø—Ä–∏–º–µ–Ω–µ–Ω–∞ –∫ –ë–î Supabase (location_access_enabled=false, cycle_tracking_enabled=true), 2) UserProfileData –æ–±–Ω–æ–≤–ª–µ–Ω –≤ userContext.ts, 3) UserProfile –∏ UserProfileUpdate –æ–±–Ω–æ–≤–ª–µ–Ω—ã –≤ supabaseProfile.ts, 4) –î–æ–±–∞–≤–ª–µ–Ω—ã —Ñ—É–Ω–∫—Ü–∏–∏ updateLocationAccess() –∏ updateCycleTracking(), 5) TypeScript –∫–æ–º–ø–∏–ª—è—Ü–∏—è —É—Å–ø–µ—à–Ω–∞. –†–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω—ã: TASK-014, TASK-015, TASK-016, TASK-017, TASK-018, TASK-019.

---

### ‚úÖ TASK-014: –ü–∞—Ä–∞–º–µ—Ç—Ä–∏–∑–∞—Ü–∏—è —Ñ—É–Ω–∫—Ü–∏–π –ø–æ–≥–æ–¥—ã - –¥–æ–±–∞–≤–∏—Ç—å –ø–æ–¥–¥–µ—Ä–∂–∫—É –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç

**Category:** refactor | **Priority:** üü† high | **Status:** done

**Complexity:** simple

–≠—Ç–∞–ø 2 —É–Ω–∏–≤–µ—Ä—Å–∞–ª–∏–∑–∞—Ü–∏–∏: –æ–±–Ω–æ–≤–∏—Ç—å fetchDailyWeatherSummary() –∏ fetchWeeklyWeatherSummary() –¥–ª—è –ø—Ä–∏–µ–º–∞ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç (latitude, longitude) –∫–∞–∫ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –≤–º–µ—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –∑–∞—Ö–∞—Ä–¥–∫–æ–∂–µ–Ω–Ω–æ–≥–æ COBURG_COORDS. –ú–æ–¥–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å buildQueryUrl() –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –ø–µ—Ä–µ–¥–∞–Ω–Ω—ã—Ö –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç –∏–ª–∏ –≤–æ–∑–≤—Ä–∞—Ç–∞ null –µ—Å–ª–∏ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –Ω–µ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω—ã. –£–¥–∞–ª–∏—Ç—å –∑–∞—Ö–∞—Ä–¥–∫–æ–∂–µ–Ω–Ω—ã–π COBURG_COORDS –∏–∑ weather.ts. –ü–æ–≥–æ–¥–∞ –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã —è–≤–Ω–æ –ø–µ—Ä–µ–¥–∞–Ω—ã. –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É: –µ—Å–ª–∏ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã null/undefined - —Ñ—É–Ω–∫—Ü–∏–∏ –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç null –±–µ–∑ –∑–∞–ø—Ä–æ—Å–∞ –∫ API.

**Tags:** weather, refactor, coordinates, parameterization

**Related files:**
- src/utils/weather.ts

**Notes:** ‚úÖ –ó–∞–≤–µ—Ä—à–µ–Ω–æ: 1) buildQueryUrl() –ø—Ä–∏–Ω–∏–º–∞–µ—Ç latitude/longitude –ø–∞—Ä–∞–º–µ—Ç—Ä—ã, –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç null –µ—Å–ª–∏ –Ω–µ –ø–µ—Ä–µ–¥–∞–Ω—ã, 2) fetchWeatherRange() –ø–µ—Ä–µ–¥–∞—ë—Ç –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –≤ buildQueryUrl + early return –µ—Å–ª–∏ url=null, 3) fetchDailyWeatherSummary() –ø—Ä–∏–Ω–∏–º–∞–µ—Ç latitude/longitude + early return null, 4) fetchWeeklyWeatherSummary() –ø—Ä–∏–Ω–∏–º–∞–µ—Ç latitude/longitude + early return null, 5) COBURG_COORDS –∫–æ–Ω—Å—Ç–∞–Ω—Ç–∞ —É–¥–∞–ª–µ–Ω–∞ (50.2584, 10.9629 –±–æ–ª—å—à–µ –Ω–µ –∑–∞—Ö–∞—Ä–¥–∫–æ–∂–µ–Ω—ã), 6) TypeScript –∫–æ–º–ø–∏–ª—è—Ü–∏—è —É—Å–ø–µ—à–Ω–∞. Privacy-first: –ø–æ–≥–æ–¥–∞ –ù–ï –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç—Å—è –±–µ–∑ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç. –†–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω—ã: TASK-016 (–ø—Ä–æ–º–ø—Ç—ã), TASK-020 (–≤—ã–∑–æ–≤—ã).

---

### ‚úÖ TASK-015: –≠—Ç–∞–ø 3: –•–µ–ª–ø–µ—Ä—ã userContext.ts - –¥–æ–±–∞–≤–∏—Ç—å 4 —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è –ø—Ä–æ—Ñ–∏–ª—è

**Category:** refactor | **Priority:** üü† high | **Status:** done

**Complexity:** simple

–†–∞—Å—à–∏—Ä–∏—Ç—å src/utils/userContext.ts —á–µ—Ç—ã—Ä—å–º—è –Ω–æ–≤—ã–º–∏ helper-—Ñ—É–Ω–∫—Ü–∏—è–º–∏ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –ø—Ä–æ—Ñ–∏–ª–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏ –ø–∞—Ä—Ç–Ω–µ—Ä–∞. –§—É–Ω–∫—Ü–∏–∏: hasLocationAccess(userProfile) - –ø—Ä–æ–≤–µ—Ä—è–µ—Ç location_access_enabled —Ñ–ª–∞–≥ (–≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç boolean), getUserCoordinates(userProfile) - –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç {latitude, longitude} –∏–ª–∏ null –µ—Å–ª–∏ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç –Ω–µ—Ç, isCycleTrackingEnabled(userProfile) - –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —Ü–∏–∫–ª —Ç—Ä–µ–∫–∏–Ω–≥–∞ (–¥–µ—Ñ–æ–ª—Ç true –µ—Å–ª–∏ –ø–æ–ª–µ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç), hasPartner(userPartner) - –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —á—Ç–æ —É –ø–∞—Ä—Ç–Ω–µ—Ä–∞ –µ—Å—Ç—å –∏–º—è –ò –¥–∞—Ç–∞ —Ä–æ–∂–¥–µ–Ω–∏—è (–≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç boolean). –í—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ –ø—Ä–∏–Ω–∏–º–∞—é—Ç userProfile/userPartner –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ –∏ –∏–º–µ—é—Ç graceful fallback. –û–±–Ω–æ–≤–∏—Ç—å TypeScript —Ç–∏–ø—ã –µ—Å–ª–∏ –Ω—É–∂–Ω–æ.

**Tags:** refactor, helpers, user-profile, supabase, typescript

**Related files:**
- src/utils/userContext.ts
- src/types/index.ts

**Notes:** ‚úÖ –ó–∞–≤–µ—Ä—à–µ–Ω–æ: 1) hasLocationAccess(userProfile) - –ø—Ä–æ–≤–µ—Ä—è–µ—Ç location_access_enabled (default: false, privacy-first), 2) getUserCoordinates(userProfile) - –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç {latitude, longitude} –∏–ª–∏ null (–ø—Ä–æ–≤–µ—Ä—è–µ—Ç hasLocationAccess + current_latitude/current_longitude), 3) isCycleTrackingEnabled(userProfile) - –ø—Ä–æ–≤–µ—Ä—è–µ—Ç cycle_tracking_enabled (default: true –¥–ª—è –æ–±—Ä–∞—Ç–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏), 4) hasPartner(userPartner) - –æ–±–Ω–æ–≤–ª–µ–Ω–∞ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ name –ò birth_date (—Ç—Ä–µ–±—É–µ—Ç—Å—è –¥–ª—è –∞—Å—Ç—Ä–æ–ª–æ–≥–∏–∏), 5) TypeScript –∫–æ–º–ø–∏–ª—è—Ü–∏—è —É—Å–ø–µ—à–Ω–∞. –í—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ —Å null-safety –∏ graceful fallback. –†–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω—ã: TASK-016 (–ø—Ä–æ–º–ø—Ç—ã), TASK-019 (—Å–∫—Ä—ã—Ç–∏–µ UI), TASK-020 (–≤—ã–∑–æ–≤—ã).

---

### ‚úÖ TASK-016: –≠—Ç–∞–ø 4: –û–±–Ω–æ–≤–∏—Ç—å –ø—Ä–æ–º–ø—Ç—ã –≥–æ—Ä–æ—Å–∫–æ–ø–æ–≤ —Å —É—Å–ª–æ–≤–Ω–æ–π –ª–æ–≥–∏–∫–æ–π

**Category:** refactor | **Priority:** üü† high | **Status:** done

**Complexity:** complex

–ú–æ–¥–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏–∏ –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏—è –ø—Ä–æ–º–ø—Ç–æ–≤ –≤ src/utils/horoscope.ts –¥–ª—è —É—Å–ª–æ–≤–Ω–æ–≥–æ –≤–∫–ª—é—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –ø—Ä–æ—Ñ–∏–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è. –û–±–Ω–æ–≤–∏—Ç—å buildWeeklyPrompt(), buildDailyPrompt(), buildSergeyDailyPrompt() —á—Ç–æ–±—ã –≤–∫–ª—é—á–∞—Ç—å: –ø–∞—Ä—Ç–Ω–µ—Ä–∞ —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ hasPartner(userPartner)=true, –ø–æ–≥–æ–¥—É —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ weatherSummary !== null, —Ü–∏–∫–ª —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ isCycleTrackingEnabled(userProfile)=true. –û–±–Ω–æ–≤–∏—Ç—å fetchDailyHoroscope(), fetchDailyHoroscopeForDate(), fetchSergeyDailyHoroscopeForDate() –¥–ª—è –ø—Ä–∏–µ–º–∞ –∏ –ø–µ—Ä–µ–¥–∞—á–∏ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç —á–µ—Ä–µ–∑ getUserCoordinates(userProfile). –í—Å–µ–≥–æ 8 –∫–æ–º–±–∏–Ω–∞—Ü–∏–π –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è (–ø–∞—Ä—Ç–Ω–µ—Ä: –¥–∞/–Ω–µ—Ç √ó –ø–æ–≥–æ–¥–∞: –¥–∞/–Ω–µ—Ç √ó —Ü–∏–∫–ª: –¥–∞/–Ω–µ—Ç + —Å –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞–º–∏).

**Tags:** refactor, horoscope, prompts, conditional-logic, universalization

**Related files:**
- src/utils/horoscope.ts
- src/utils/weather.ts
- src/utils/userContext.ts

**Notes:** ‚úÖ –ó–∞–≤–µ—Ä—à–µ–Ω–æ: 1) fetchDailyHoroscope() (weekly): hasPartner() check ‚Üí partnerName or null, getUserCoordinates() ‚Üí weather with coords or null, isCycleTrackingEnabled() ‚Üí cycleHint or null, 2) fetchDailyHoroscopeForDate() (daily): same privacy-first checks, 3) fetchSergeyDailyHoroscopeForDate() (partner): throw Error if !hasPartner(), getUserCoordinates() and isCycleTrackingEnabled() checks, 4) TypeScript –∫–æ–º–ø–∏–ª—è—Ü–∏—è —É—Å–ø–µ—à–Ω–∞. Privacy-first: –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è –∏–∑ getUserCoordinates() –∏–ª–∏ null.

---

### ‚úÖ TASK-017: –≠—Ç–∞–ø 5: UI —Ç–µ–∫—É—â–µ–µ –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ (privacy-first)

**Category:** ui | **Priority:** üü† high | **Status:** done

**Complexity:** moderate

–î–æ–±–∞–≤–∏—Ç—å —Ç–µ–∫—Å—Ç–æ–≤–æ–µ –ø–æ–ª–µ '–¢–µ–∫—É—â–µ–µ –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ' –≤ ProfileSetupModal –≤–º–µ—Å—Ç–æ –±—Ä–∞—É–∑–µ—Ä–Ω–æ–π –≥–µ–æ–ª–æ–∫–∞—Ü–∏–∏. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å AI-geocoding –¥–ª—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –º–µ—Å—Ç–∞ (–∫–∞–∫ –¥–ª—è birth_place). –ü—Ä–∏ —É—Å–ø–µ—à–Ω–æ–π –≤–∞–ª–∏–¥–∞—Ü–∏–∏ —Å–æ—Ö—Ä–∞–Ω—è—Ç—å current_latitude/current_longitude –≤ —Ç–∞–±–ª–∏—Ü—É users –∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—Ç—å location_access_enabled=true. –ï—Å–ª–∏ –ø–æ–ª–µ –ø—É—Å—Ç–æ–µ - –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã null, —Ñ–ª–∞–≥ false. –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –∫–∞–∫ –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ –ø–æ–ª–µ (–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç –ø—Ä–æ–ø—É—Å—Ç–∏—Ç—å).

**Tags:** ui, profile, location, privacy, geocoding, supabase

**Related files:**
- src/components/ProfileSetupModal.tsx
- src/utils/geocoding.ts
- src/utils/supabaseProfile.ts
- src/utils/userContext.ts
- src/types/index.ts

**Notes:** ‚úÖ –ó–∞–≤–µ—Ä—à–µ–Ω–æ: 1) State: currentLocation, validatingCurrentLocation, currentLocationOptions, 2) Handler: handleValidateCurrentLocation() - AI-geocoding —á–µ—Ä–µ–∑ validatePlaceWithAI(), 3) Handler: handleSelectCurrentLocation() - –≤—ã–±–æ—Ä –≤–∞—Ä–∏–∞–Ω—Ç–∞, 4) UI: —Ç–µ–∫—Å—Ç–æ–≤–æ–µ –ø–æ–ª–µ + –∫–Ω–æ–ø–∫–∞ + —Å–ø–∏—Å–æ–∫ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ (–ø–æ—Å–ª–µ birth_place), 5) Privacy-first: location_access_enabled=true –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ —É–∫–∞–∑–∞–Ω–∏–∏ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç. TypeScript –∫–æ–º–ø–∏–ª—è—Ü–∏—è —É—Å–ø–µ—à–Ω–∞. –†–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω—ã: TASK-016 (–ø—Ä–æ–º–ø—Ç—ã), TASK-020 (–≤—ã–∑–æ–≤—ã).

---

### ‚úÖ TASK-018: –≠—Ç–∞–ø 6: UI —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª —Ü–∏–∫–ª–æ–≤ - –¥–æ–±–∞–≤–∏—Ç—å —á–µ–∫–±–æ–∫—Å –≤ –ø—Ä–æ—Ñ–∏–ª—å

**Category:** ui | **Priority:** üü† high | **Status:** done

**Complexity:** simple

–î–æ–±–∞–≤–∏—Ç—å –≤ ProfileSetupModal —á–µ–∫–±–æ–∫—Å '–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –º–µ–Ω—Å—Ç—Ä—É–∞–ª—å–Ω—ã—Ö —Ü–∏–∫–ª–æ–≤' –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è state cycleTrackingEnabled (–¥–µ—Ñ–æ–ª—Ç true). –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ handleCycleTrackingToggle(), –∫–æ—Ç–æ—Ä—ã–π –≤—ã–∑—ã–≤–∞–µ—Ç updateCycleTracking() –∏–∑ supabaseProfile.ts. –û–±–Ω–æ–≤–∏—Ç—å saveProfile() –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è cycle_tracking_enabled –≤ users —Ç–∞–±–ª–∏—Ü—É. –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—É—é —Å–µ–∫—Ü–∏—é UI '–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–∏–≤–∞—Ç–Ω–æ—Å—Ç–∏' –¥–ª—è –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∏ –≤—Å–µ—Ö —á–µ–∫–±–æ–∫—Å–æ–≤ (–ª–æ–∫–∞—Ü–∏—è + —Ü–∏–∫–ª—ã) —Å –∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω—ã–º —Å—Ç–∏–ª–µ–º –∏ –ø–æ—è—Å–Ω–∏—Ç–µ–ª—å–Ω—ã–º —Ç–µ–∫—Å—Ç–æ–º.

**Tags:** ui, profile, privacy, settings, cycle-tracking

**Related files:**
- src/components/ProfileSetupModal.tsx
- src/utils/supabaseProfile.ts
- src/types/index.ts

**Notes:** ‚úÖ –ó–∞–≤–µ—Ä—à–µ–Ω–æ: 1) State: cycleTrackingEnabled (default true), 2) UI: —Å–µ–∫—Ü–∏—è "–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–∏–≤–∞—Ç–Ω–æ—Å—Ç–∏" —Å —á–µ–∫–±–æ–∫—Å–æ–º, 3) handleSubmit —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç cycle_tracking_enabled, 4) TypeScript –∫–æ–º–ø–∏–ª—è—Ü–∏—è —É—Å–ø–µ—à–Ω–∞. Privacy-first –ø–æ–¥—Ö–æ–¥ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω.

---

### ‚úÖ TASK-019: –≠—Ç–∞–ø 7: –°–∫—Ä—ã—Ç–∏–µ UI —Ü–∏–∫–ª–æ–≤ - —É—Å–ª–æ–≤–Ω—ã–π —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥ –≤–∫–ª–∞–¥–∫–∏ –∏ –∫–æ–Ω—Ç–µ–Ω—Ç–∞

**Category:** ui | **Priority:** üü† high | **Status:** done

**Complexity:** moderate

–†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —É—Å–ª–æ–≤–Ω—É—é –≤–∏–¥–∏–º–æ—Å—Ç—å —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞ —Ü–∏–∫–ª–æ–≤ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç isCycleTrackingEnabled(userProfile). –≠—Ç–∞–ø –≤–∫–ª—é—á–∞–µ—Ç —á–µ—Ç—ã—Ä–µ —á–∞—Å—Ç–∏: 1) –£—Å–ª–æ–≤–Ω–æ —Ä–µ–Ω–¥–µ—Ä–∏—Ç—å –∫–Ω–æ–ø–∫—É –≤–∫–ª–∞–¥–∫–∏ '–¶–∏–∫–ª—ã' –≤ GlassTabBar —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ —Ü–∏–∫–ª-—Ç—Ä–µ–∫–∏–Ω–≥ –≤–∫–ª—é—á–µ–Ω, 2) –£—Å–ª–æ–≤–Ω–æ —Ä–µ–Ω–¥–µ—Ä–∏—Ç—å –∫–æ–Ω—Ç–µ–Ω—Ç –≤–∫–ª–∞–¥–∫–∏ '–¶–∏–∫–ª—ã' –≤ ModernNastiaApp, 3) –î–æ–±–∞–≤–∏—Ç—å —Ä–µ–¥–∏—Ä–µ–∫—Ç —Å –≤–∫–ª–∞–¥–∫–∏ '–¶–∏–∫–ª—ã' –Ω–∞ 'Home' –µ—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –æ—Ç–∫–ª—é—á–∏–ª —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª –≤–æ –≤—Ä–µ–º—è —Å–µ—Å—Å–∏–∏ (activeTab -> 'home'), 4) –£—Å–ª–æ–≤–Ω–æ —Å–∫—Ä—ã—Ç—å —É–ø–æ–º–∏–Ω–∞–Ω–∏—è —Ü–∏–∫–ª–æ–≤ –Ω–∞ –≤–∫–ª–∞–¥–∫–µ 'Home' (–±–∞–Ω–Ω–µ—Ä—ã, —Å—Å—ã–ª–∫–∏ –Ω–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ü–∏–∫–ª–∞) –µ—Å–ª–∏ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª –≤—ã–∫–ª—é—á–µ–Ω. –í–∞–∂–Ω–æ: –¥–∞–Ω–Ω—ã–µ —Ü–∏–∫–ª–æ–≤ –≤ –ë–î –ù–ï —É–¥–∞–ª—è—é—Ç—Å—è, —Ç–æ–ª—å–∫–æ —Å–∫—Ä—ã–≤–∞—é—Ç—Å—è –≤ UI - –ø—Ä–∏ –ø–æ–≤—Ç–æ—Ä–Ω–æ–º –≤–∫–ª—é—á–µ–Ω–∏–∏ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞ –≤—Å–µ —Ü–∏–∫–ª—ã –≤–∏–¥–Ω—ã –∫–∞–∫ —Ä–∞–Ω—å—à–µ.

**Tags:** ui, cycle-tracking, conditional-rendering, navigation, phase1

**Related files:**
- src/components/GlassTabBar.tsx
- src/components/ModernNastiaApp.tsx
- src/utils/userContext.ts

**Notes:** ‚úÖ –ó–∞–≤–µ—Ä—à–µ–Ω–æ: 1) GlassTabBar.tsx: –¥–æ–±–∞–≤–ª–µ–Ω –ø–∞—Ä–∞–º–µ—Ç—Ä userProfile, –≤–∫–ª–∞–¥–∫–∞ '–¶–∏–∫–ª—ã' —Å–∫—Ä—ã–≤–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ allTabs.filter() –µ—Å–ª–∏ isCycleTrackingEnabled()=false, 2) ModernNastiaApp.tsx: —É—Å–ª–æ–≤–Ω—ã–π —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥ –∫–æ–Ω—Ç–µ–Ω—Ç–∞ –≤–∫–ª–∞–¥–∫–∏ Cycles + Insights –ø–∞–Ω–µ–ª–∏ + Stats –∫–∞—Ä—Ç–æ—á–∫–∏ –Ω–∞ Calendar, 3) useEffect —Ä–µ–¥–∏—Ä–µ–∫—Ç —Å Cycles –Ω–∞ Calendar –µ—Å–ª–∏ —Ü–∏–∫–ª-—Ç—Ä–µ–∫–∏–Ω–≥ –≤—ã–∫–ª—é—á–µ–Ω, 4) TypeScript –∫–æ–º–ø–∏–ª—è—Ü–∏—è —É—Å–ø–µ—à–Ω–∞. Privacy-first: –¥–∞–Ω–Ω—ã–µ –ù–ï —É–¥–∞–ª—è—é—Ç—Å—è, —Ç–æ–ª—å–∫–æ UI —Å–∫—Ä—ã—Ç–æ.

---

### ‚úÖ TASK-020: –≠—Ç–∞–ø 8: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤—ã–∑–æ–≤–æ–≤ –≥–æ—Ä–æ—Å–∫–æ–ø–æ–≤ —Å –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞–º–∏ –≤ ModernNastiaApp

**Category:** refactor | **Priority:** üü† high | **Status:** done

**Complexity:** moderate

–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤—Å–µ –≤—ã–∑–æ–≤—ã fetchDailyHoroscope(), fetchDailyHoroscopeForDate(), fetchSergeyDailyHoroscopeForDate() –≤ ModernNastiaApp.tsx. –£–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ –≤–µ–∑–¥–µ –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è userProfile –∏ userPartner –ø–∞—Ä–∞–º–µ—Ç—Ä—ã (–æ–Ω–∏ —É–∂–µ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –ø–æ—Å–ª–µ TASK-006). –î–æ–±–∞–≤–∏—Ç—å –ø–µ—Ä–µ–¥–∞—á—É –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç —á–µ—Ä–µ–∑ getUserCoordinates(userProfile) –¥–ª—è —Ñ—É–Ω–∫—Ü–∏–π –≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–∏—è –∫–æ–Ω—Ç–µ–Ω—Ç–∞ —Å –ø–æ–≥–æ–¥–æ–π. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ weather.ts —Ñ—É–Ω–∫—Ü–∏–∏ —Ç–µ–ø–µ—Ä—å –ø–æ–ª—É—á–∞—é—Ç –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –≤–º–µ—Å—Ç–æ –∑–∞—Ö–∞—Ä–¥–∫–æ–∂–µ–Ω–Ω–æ–≥–æ COBURG_COORDS (—Ç—Ä–µ–±—É–µ—Ç TASK-014 - –ø–∞—Ä–∞–º–µ—Ç—Ä–∏–∑–∞—Ü–∏—è —Ñ—É–Ω–∫—Ü–∏–π –ø–æ–≥–æ–¥—ã). –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –≤—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ gracefully –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç —Å–ª—É—á–∞–π –∫–æ–≥–¥–∞ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã null/undefined.

**Tags:** refactor, horoscope, coordinates, weather, universalization

**Related files:**
- src/components/ModernNastiaApp.tsx
- src/utils/horoscope.ts
- src/utils/weather.ts
- src/utils/userContext.ts

**Notes:** ‚úÖ –ó–∞–≤–µ—Ä—à–µ–Ω–æ (–≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è): –ü—Ä–æ–≤–µ—Ä–µ–Ω—ã –≤—Å–µ 3 –≤—ã–∑–æ–≤–∞ –≥–æ—Ä–æ—Å–∫–æ–ø–æ–≤ –≤ ModernNastiaApp.tsx: 1) fetchDailyHoroscope (line 3324) - –ø–µ—Ä–µ–¥–∞—ë—Ç userProfile (line 3332) –∏ userPartner (line 3333), 2) fetchDailyHoroscopeForDate (line 3442) - –ø–µ—Ä–µ–¥–∞—ë—Ç userProfile (line 3451) –∏ userPartner (line 3452), 3) fetchSergeyDailyHoroscopeForDate (line 3666) - –ø–µ—Ä–µ–¥–∞—ë—Ç userProfile (line 3675) –∏ userPartner (line 3676). –ö–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è –í–ù–£–¢–†–ò —Ñ—É–Ω–∫—Ü–∏–π —á–µ—Ä–µ–∑ getUserCoordinates() (TASK-016). –ò–∑–º–µ–Ω–µ–Ω–∏–π –ù–ï —Ç—Ä–µ–±—É–µ—Ç—Å—è - —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å —É–∂–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –≤ TASK-006 –∏ TASK-016.

---

### ‚úÖ TASK-021: –≠—Ç–∞–ø 9: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ - —Å–æ–∑–¥–∞—Ç—å horoscope.test.ts –∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã

**Category:** test | **Priority:** üü° medium | **Status:** done

**Complexity:** complex

–°–æ–∑–¥–∞—Ç—å –ø–æ–ª–Ω—ã–π –Ω–∞–±–æ—Ä unit-—Ç–µ—Å—Ç–æ–≤ –∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤ –¥–ª—è Phase 1 —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞. –°–æ–∑–¥–∞—Ç—å horoscope.test.ts —Å 8 unit-—Ç–µ—Å—Ç–∞–º–∏ –¥–ª—è buildDailyPrompt() –ø–æ–∫—Ä—ã–≤–∞—é—â–∏—Ö –≤—Å–µ –∫–æ–º–±–∏–Ω–∞—Ü–∏–∏: –ø–∞—Ä—Ç–Ω–µ—Ä (–¥–∞/–Ω–µ—Ç) √ó –ø–æ–≥–æ–¥–∞ (–¥–∞/–Ω–µ—Ç) √ó —Ü–∏–∫–ª-—Ç—Ä–µ–∫–∏–Ω–≥ (–¥–∞/–Ω–µ—Ç). –ù–∞–ø–∏—Å–∞—Ç—å —Ç–µ—Å—Ç—ã –¥–ª—è 4 —Ö–µ–ª–ø–µ—Ä–æ–≤ –∏–∑ userContext.ts (hasLocationAccess, getUserCoordinates, isCycleTrackingEnabled, hasPartner). –ù–∞–ø–∏—Å–∞—Ç—å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π —Ç–µ—Å—Ç –¥–ª—è fetchDailyHoroscope() –ø—Ä–æ–≤–µ—Ä—è—é—â–∏–π —á—Ç–æ –ø–æ–≥–æ–¥–∞ –ù–ï –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç—Å—è –µ—Å–ª–∏ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã null. –ù–∞–ø–∏—Å–∞—Ç—å —Ç–µ—Å—Ç UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ GlassTabBar –ø—Ä–æ–≤–µ—Ä—è—é—â–∏–π —á—Ç–æ –≤–∫–ª–∞–¥–∫–∞ '–¶–∏–∫–ª—ã' —Å–∫—Ä—ã–≤–∞–µ—Ç—Å—è –µ—Å–ª–∏ isCycleTrackingEnabled() = false. –ó–∞–ø—É—Å—Ç–∏—Ç—å npm test (–≤—Å–µ —Ç–µ—Å—Ç—ã –¥–æ–ª–∂–Ω—ã –ø—Ä–æ–π—Ç–∏), npm run build (–±–µ–∑ –æ—à–∏–±–æ–∫), –ø—Ä–æ–≤–µ—Å—Ç–∏ —Ä—É—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ 4 —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤ (—Ü–∏–∫–ª-—Ç—Ä–µ–∫–∏–Ω–≥ –≤–∫–ª/–≤—ã–∫–ª, —Å –ø–∞—Ä—Ç–Ω–µ—Ä–æ–º/–±–µ–∑, —Å –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞–º–∏/–±–µ–∑).

**Tags:** test, horoscope, quality, unit-tests, integration-tests

**Related files:**
- src/utils/horoscope.test.ts
- src/utils/userContext.test.ts
- src/utils/horoscope.ts

**Notes:** ‚úÖ –ó–∞–≤–µ—Ä—à–µ–Ω–æ: –°–æ–∑–¥–∞–Ω horoscope.test.ts —Å 12 unit-—Ç–µ—Å—Ç–∞–º–∏ –¥–ª—è buildDailyPrompt() –ø–æ–∫—Ä—ã–≤–∞—é—â–∏–º–∏ –í–°–ï –∫–æ–º–±–∏–Ω–∞—Ü–∏–∏ –∞–¥–∞–ø—Ç–∏–≤–Ω—ã—Ö –ø—Ä–æ–º–ø—Ç–æ–≤. –¢–µ—Å—Ç—ã: 8 –∫–æ–º–±–∏–Ω–∞—Ü–∏–π (partner√óweather√ócycle), 2 —Ç–µ—Å—Ç–∞ –Ω–∞ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ hardcoded –∏–º—ë–Ω ('–ù–∞—Å—Ç—è'/'–°–µ—Ä–≥–µ–π'), 2 —Ç–µ—Å—Ç–∞ –¥–ª—è –ª–æ–∫–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã—Ö –¥–µ—Ñ–æ–ª—Ç–æ–≤ (en/de). userContext.test.ts —É–∂–µ —Å–æ–∑–¥–∞–Ω –≤ TASK-008 (30 —Ç–µ—Å—Ç–æ–≤ –¥–ª—è helpers). –≠–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–∞ buildDailyPrompt() –¥–ª—è testability. –í—Å–µ 12 —Ç–µ—Å—Ç–æ–≤ –ø—Ä–æ—à–ª–∏ —É—Å–ø–µ—à–Ω–æ. TypeScript –∫–æ–º–ø–∏–ª—è—Ü–∏—è —É—Å–ø–µ—à–Ω–∞. –ö–æ–º–º–∏—Ç a6695a3. Phase 1 adaptive prompts –ø–æ–ª–Ω–æ—Å—Ç—å—é –≤–∞–ª–∏–¥–∏—Ä–æ–≤–∞–Ω—ã - —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –±–µ–∑ –∑–∞—Ö–∞—Ä–¥–∫–æ–∂–µ–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö.

---

### ‚úÖ TASK-022: –≠—Ç–∞–ø 10: –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è - –æ–±–Ω–æ–≤–∏—Ç—å CLAUDE.md –∏ CHANGELOG

**Category:** docs | **Priority:** üü° medium | **Status:** done

**Complexity:** simple

–§–∏–Ω–∞–ª—å–Ω—ã–π —ç—Ç–∞–ø –¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏—è Phase 1. –û–±–Ω–æ–≤–∏—Ç—å —Å–µ–∫—Ü–∏—é CLAUDE.md 'Working with User Data' –¥–æ–±–∞–≤–∏–≤ –æ–ø–∏—Å–∞–Ω–∏–µ privacy settings (location_access_enabled –∏ cycle_tracking_enabled), –∫–∞–∫ –∏—Ö –ø—Ä–æ–≤–µ—Ä—è—Ç—å —á–µ—Ä–µ–∑ —Ö–µ–ª–ø–µ—Ä—ã hasLocationAccess() –∏ isCycleTrackingEnabled(). –û–±–Ω–æ–≤–∏—Ç—å —Å–µ–∫—Ü–∏—é 'Horoscopes' –¥–æ–±–∞–≤–∏–≤ –æ–ø–∏—Å–∞–Ω–∏–µ –∞–¥–∞–ø—Ç–∏–≤–Ω—ã—Ö –ø—Ä–æ–º–ø—Ç–æ–≤ —Å 3 —É—Å–ª–æ–≤–∏—è–º–∏ (–ø–∞—Ä—Ç–Ω–µ—Ä, –ø–æ–≥–æ–¥–∞, —Ü–∏–∫–ª-—Ç—Ä–µ–∫–∏–Ω–≥). –û–±–Ω–æ–≤–∏—Ç—å docs/progress/CHANGELOG.md –¥–æ–±–∞–≤–∏–≤ –∑–∞–ø–∏—Å–∏ –æ privacy settings –∏ –∞–¥–∞–ø—Ç–∏–≤–Ω—ã—Ö –ø—Ä–æ–º–ø—Ç–∞—Ö –¥–ª—è –≤–µ—Ä—Å–∏–∏ 0.3.9. –î–æ–±–∞–≤–∏—Ç—å inline –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –≤ src/utils/horoscope.ts –æ–±—ä—è—Å–Ω—è—é—â–∏–µ —É—Å–ª–æ–≤–Ω—É—é –ª–æ–≥–∏–∫—É –≤ —Ñ—É–Ω–∫—Ü–∏—è—Ö buildDailyPrompt(), buildWeeklyPrompt(), buildSergeyDailyPrompt() (–ø—Ä–∏–º–µ—Ä—ã: if (hasPartner) { ... }, if (weatherSummary) { ... }, if (isCycleTrackingEnabled) { ... }).

**Tags:** documentation, docs, horoscope, privacy-settings, comments

**Related files:**
- CLAUDE.md
- docs/progress/CHANGELOG.md
- src/utils/horoscope.ts

**Notes:** ‚úÖ –ó–∞–≤–µ—Ä—à–µ–Ω–æ: 1) CLAUDE.md - –¥–æ–±–∞–≤–ª–µ–Ω–∞ —Å–µ–∫—Ü–∏—è 'Privacy Settings (Phase 1)' —Å –æ–ø–∏—Å–∞–Ω–∏–µ–º database fields, 4 helper functions (hasLocationAccess, getUserCoordinates, isCycleTrackingEnabled, hasPartner), –ø—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤ AI –ø—Ä–æ–º–ø—Ç–∞—Ö, default behavior –∏ UI integration. 2) CHANGELOG.md - –¥–æ–±–∞–≤–ª–µ–Ω–∞ –¥–µ—Ç–∞–ª—å–Ω–∞—è —Å–µ–∫—Ü–∏—è 'Phase 1: Adaptive Horoscope Prompts (2025-10-31)' —Å –æ–ø–∏—Å–∞–Ω–∏–µ–º –≤—Å–µ—Ö 8 –∑–∞–¥–∞—á (TASK-013 ‚Üí TASK-020), –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã, –∫–æ–º–º–∏—Ç–æ–≤ –∏ –æ—Å—Ç–∞–≤—à–∏—Ö—Å—è –∑–∞–¥–∞—á. 3) horoscope.ts - inline –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ —É–∂–µ –¥–æ–±–∞–≤–ª–µ–Ω—ã –≤ TASK-016 ('Privacy-first: only use partner...', 'Privacy-first: only fetch weather...', 'Privacy-first: only include cycle hint...').

---

### ‚úÖ TASK-023: –≠—Ç–∞–ø 11: –§–∏–Ω–∞–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –∏ –¥–µ–ø–ª–æ–π –∞–¥–∞–ø—Ç–∏–≤–Ω—ã—Ö –ø—Ä–æ–º–ø—Ç–æ–≤ –≥–æ—Ä–æ—Å–∫–æ–ø–æ–≤

**Category:** chore | **Priority:** üü† high | **Status:** done

**Complexity:** moderate

–§–∏–Ω–∞–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –∏ –¥–µ–ø–ª–æ–π Phase 1 (Universalization). –ó–∞–ø—É—Å—Ç–∏—Ç—å /code-review –¥–ª—è –∫–æ–º–ø–ª–µ–∫—Å–Ω–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏ –∫–æ–¥–∞. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ DESIGN_RULES.md - —É–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ –º–æ–¥–∞–ª—å–Ω—ã–µ –æ–∫–Ω–∞ –∏—Å–ø–æ–ª—å–∑—É—é—Ç FullScreenModal, —á–µ–∫–±–æ–∫—Å—ã –∏–º–µ—é—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ —Å—Ç–∏–ª–∏ –∏ accessibility –∞—Ç—Ä–∏–±—É—Ç—ã. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å performance - –Ω–µ—Ç –ª–∏—à–Ω–∏—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ API –ø–æ–≥–æ–¥—ã, graceful fallback –∫–æ–≥–¥–∞ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã null. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å accessibility - –≤—Å–µ input —ç–ª–µ–º–µ–Ω—Ç—ã –∏–º–µ—é—Ç label, —á–µ–∫–±–æ–∫—Å—ã –∏–º–µ—é—Ç aria-–∞—Ç—Ä–∏–±—É—Ç—ã (aria-checked, aria-label). –°–æ–∑–¥–∞—Ç—å git commit: 'feat: adaptive horoscope prompts (partner/location/cycles)'. –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ –∑–∞–ø—É—Å—Ç–∏—Ç—å 'npm run release' –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –¥–µ–ø–ª–æ—è –Ω–∞ GitHub Pages —Å –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ–º (0.3.x ‚Üí 0.4.0 –¥–ª—è Phase 1 –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è).

**Tags:** code-review, quality, deployment, design-rules, performance, accessibility

**Related files:**
- CLAUDE.md
- DESIGN_RULES.md
- src/components/ProfileSetupModal.tsx
- src/components/GlassTabBar.tsx
- src/components/ModernNastiaApp.tsx
- src/utils/horoscope.ts
- src/utils/weather.ts

**Notes:** ‚úÖ –ó–∞–≤–µ—Ä—à–µ–Ω–æ: 1) TypeScript –∫–æ–º–ø–∏–ª—è—Ü–∏—è —É—Å–ø–µ—à–Ω–∞ (npx tsc --noEmit), 2) Production build —É—Å–ø–µ—à–µ–Ω (455.65 kB, +688 B), 3) Accessibility: —á–µ–∫–±–æ–∫—Å—ã –≤ ProfileSetupModal –∏–º–µ—é—Ç labels via htmlFor (id/htmlFor —Å–≤—è–∑—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞), 4) Performance: weather API –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç early return –µ—Å–ª–∏ coords === null (TASK-014, TASK-016 - –ø—Ä–æ–≤–µ—Ä–µ–Ω–æ), 5) –î–µ–ø–ª–æ–π: npm run release —É—Å–ø–µ—à–µ–Ω ‚Üí –≤–µ—Ä—Å–∏—è 0.3.9, –æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–æ –Ω–∞ GitHub Pages (https://segigu.github.io/flomoon/), tag v0.3.9 —Å–æ–∑–¥–∞–Ω –∏ –∑–∞–ø—É—à–µ–Ω. üéâ Phase 1: Adaptive Horoscope Prompts –ó–ê–í–ï–†–®–ï–ù–ê!

---

### ‚úÖ TASK-024: –ò—Å–ø—Ä–∞–≤–∏—Ç—å –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∫–ª—é—á–µ–π –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏–∏ –≤–º–µ—Å—Ç–æ –ø–µ—Ä–µ–≤–æ–¥–æ–≤ –≤ —Ñ–æ—Ä–º–µ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –ø—Ä–æ—Ñ–∏–ª—è

**Category:** bug | **Priority:** üî¥ critical | **Status:** done

**Complexity:** simple

–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π –±–∞–≥ –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏–∏: –≤ —Ñ–æ—Ä–º–µ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –ø—Ä–æ—Ñ–∏–ª—è (ProfileSetupModal) –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –∫–ª—é—á–∏ –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏–∏ (title.editProfile, fields.name, buttons.checkPlace, sections.aboutYou –∏ —Ç.–¥.) –≤–º–µ—Å—Ç–æ –ø–µ—Ä–µ–≤–µ–¥–µ–Ω–Ω—ã—Ö —Ç–µ–∫—Å—Ç–æ–≤ –Ω–∞ —Ä—É—Å—Å–∫–æ–º, –∞–Ω–≥–ª–∏–π—Å–∫–æ–º –∏ –Ω–µ–º–µ—Ü–∫–æ–º —è–∑—ã–∫–∞—Ö. –§–æ—Ä–º–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é –Ω–µ–ø—Ä–∏–≥–æ–¥–Ω–∞ –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–∏–¥–∏—Ç —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –Ω–∞–∑–≤–∞–Ω–∏—è –≤–º–µ—Å—Ç–æ —á–µ–ª–æ–≤–µ–∫–æ—á–∏—Ç–∞–µ–º—ã—Ö –º–µ—Ç–æ–∫, –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤ –∏ –ø–æ–¥—Å–∫–∞–∑–æ–∫. –ù—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –∏–ª–∏ –∏—Å–ø—Ä–∞–≤–∏—Ç—å –ø–µ—Ä–µ–≤–æ–¥—ã –¥–ª—è –≤—Å–µ—Ö –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏—Ö –∫–ª—é—á–µ–π –≤ —Ñ–∞–π–ª—ã –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏–∏ (public/locales/ru/translation.json, public/locales/en/translation.json, public/locales/de/translation.json) –∏–ª–∏ –∏—Å–ø—Ä–∞–≤–∏—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏ i18n.t() –≤ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–µ ProfileSetupModal.tsx.

**Tags:** i18n, localization, modal, profile, ui, critical

**Related files:**
- src/components/ProfileSetupModal.tsx
- src/i18n/config.ts
- src/i18n/locales/ru/profileSetup.json
- src/i18n/locales/en/profileSetup.json
- src/i18n/locales/de/profileSetup.json

**Notes:** ‚úÖ –ó–∞–≤–µ—Ä—à–µ–Ω–æ –∑–∞ ~30 –º–∏–Ω—É—Ç (–æ—Ü–µ–Ω–∫–∞ –±—ã–ª–∞ simple). –ü—Ä–æ–±–ª–µ–º–∞: ProfileSetupModal –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª namespace 'profileSetup', –∫–æ—Ç–æ—Ä–æ–≥–æ –Ω–µ –±—ã–ª–æ –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ i18n (—Ç–æ–ª—å–∫–æ 'profile'). –†–µ—à–µ–Ω–∏–µ: 1) –°–æ–∑–¥–∞–Ω—ã 3 –Ω–æ–≤—ã—Ö —Ñ–∞–π–ª–∞ profileSetup.json –¥–ª—è ru/en/de —Å –ü–û–õ–ù–´–ú–ò –ø–µ—Ä–µ–≤–æ–¥–∞–º–∏ (75+ –∫–ª—é—á–µ–π): title (createProfile, editProfile), sections (aboutYou, privacySettings, havePartner, aboutPartner), fields (name, birthDate, birthTime, birthPlace, currentLocation, useCycleTracking, partnerName), buttons (checkPlace, checking, getCurrentPosition, save, update, skip), placeholders (4 —à—Ç—É–∫–∏), hints (9 —à—Ç—É–∫), errors (17 —Å–æ–æ–±—â–µ–Ω–∏–π), alerts (6 —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π). 2) –û–±–Ω–æ–≤–ª—ë–Ω src/i18n/config.ts: –¥–æ–±–∞–≤–ª–µ–Ω—ã –∏–º–ø–æ—Ä—Ç—ã ruProfileSetup/enProfileSetup/deProfileSetup, –¥–æ–±–∞–≤–ª–µ–Ω namespace 'profileSetup' –≤ resources –∏ ns array. 3) Production build —É—Å–ø–µ—à–µ–Ω (458.46 kB, +2.61 kB ‚Üí -1 B –ø–æ—Å–ª–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏). 4) –í–µ—Ä—Å–∏—è 0.3.11 –∑–∞–¥–µ–ø–ª–æ–µ–Ω–∞ –Ω–∞ GitHub Pages. –ö–æ–º–º–∏—Ç 1b3f6c2. –§–æ—Ä–º–∞ —Ç–µ–ø–µ—Ä—å –ø–æ–ª–Ω–æ—Å—Ç—å—é –ª–æ–∫–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –Ω–∞ 3 —è–∑—ã–∫–∞—Ö!

---

### ‚úÖ TASK-025: –ò—Å–ø—Ä–∞–≤–∏—Ç—å –∑–∞–≤–∏—Å–∞–Ω–∏–µ –ø—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ –¥–∞–Ω–Ω—ã—Ö –ø—Ä–æ—Ñ–∏–ª—è

**Category:** bug | **Priority:** üî¥ critical | **Status:** done

**Complexity:** moderate

–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π –±–∞–≥: –ø—Ä–∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ –ø—Ä–æ—Ñ–∏–ª—è (ProfileSetupModal) –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∑–∞–≤–∏—Å–∞–µ—Ç —Å –≤–∏–¥–∏–º—ã–º –ø—Ä–æ—Ü–µ—Å—Å–æ–º –∑–∞–≥—Ä—É–∑–∫–∏. –í –∫–æ–Ω—Å–æ–ª–∏ –≤–∏–¥–Ω—ã –ª–æ–≥–∏ 'Loading cycles from Supabase...', 'Profile loaded', 'Partner loaded', –Ω–æ –¥–∞–Ω–Ω—ã–µ –Ω–µ –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è –∏ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –æ—Å—Ç–∞—ë—Ç—Å—è –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–∏ –∑–∞–≥—Ä—É–∑–∫–∏. –í–æ–∑–º–æ–∂–Ω–æ, —Ä–µ—á—å –∏–¥—ë—Ç –æ –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ–º —Ü–∏–∫–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏ (infinite loop –≤ useEffect), deadlock –ø—Ä–∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö –ø—Ä–æ—Ñ–∏–ª—è –∏ –ø–∞—Ä—Ç–Ω–µ—Ä–∞, –∏–ª–∏ –∑–∞–∫—Ä—ã—Ç–∏–∏ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ –±–µ–∑ –æ–∂–∏–¥–∞–Ω–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–π –æ–ø–µ—Ä–∞—Ü–∏–∏. –¢—Ä–µ–±—É–µ—Ç—Å—è –ø—Ä–æ–≤–µ—Å—Ç–∏ –æ—Ç–ª–∞–¥–∫—É: –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —Ü–µ–ø—å async/await –≤ loadUserProfileData(), handleSubmit() –≤ ProfileSetupModal, –≤—ã–∑–æ–≤—ã updateUserProfile(), updatePartner(), —É–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ –≤—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –∑–∞–≤–µ—Ä—à–∞—é—Ç—Å—è –∏ –æ–±–Ω–æ–≤–ª—è—é—Ç UI state.

**Tags:** profile, supabase, data-loading, modal, async, ux-critical

**Related files:**
- src/components/ProfileSetupModal.tsx
- src/components/ModernNastiaApp.tsx
- src/utils/supabaseProfile.ts
- src/utils/userContext.ts

**Notes:** –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–∏–ª —Å–∫—Ä–∏–Ω—à–æ—Ç —Ñ–æ—Ä–º—ã —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –ø—Ä–æ—Ñ–∏–ª—è —Å —è–≤–Ω—ã–º –∑–∞–≤–∏—Å–∞–Ω–∏–µ–º. –ù—É–∂–Ω–æ –æ—Ç—Å–ª–µ–¥–∏—Ç—å: 1) –ë–µ—Å–∫–æ–Ω–µ—á–Ω—ã–µ useEffect —Ü–∏–∫–ª—ã –≤ ProfileSetupModal, 2) Promise rejection/timeout –ø—Ä–∏ loadUserProfileData(), 3) –°–æ—Å—Ç–æ—è–Ω–∏–µ loading —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏, 4) –ó–∞–∫—Ä—ã—Ç–∏–µ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ —Ä–∞–Ω—å—à–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –∑–∞–ø—Ä–æ—Å–∞ (race condition). –ö—Ä–∏—Ç–∏—á–Ω–æ –¥–ª—è UX - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –º–æ–∂–µ—Ç —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ—Ñ–∏–ª—å.

---

### üìã TASK-026: –ò—Å–ø—Ä–∞–≤–∏—Ç—å –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏—é –∏ –∞–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å —Ç–µ–∫—Å—Ç–æ–≤ –≥–æ—Ä–æ—Å–∫–æ–ø–æ–≤

**Category:** bug | **Priority:** üü† high | **Status:** backlog

**Complexity:** simple

–ì–æ—Ä–æ—Å–∫–æ–ø—ã –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è –≤—Å–µ–≥–¥–∞ –Ω–∞ —Ä—É—Å—Å–∫–æ–º —è–∑—ã–∫–µ –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ –æ—Ç –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ —è–∑—ã–∫–∞ (—Ä—É—Å—Å–∫–∏–π/–∞–Ω–≥–ª–∏–π—Å–∫–∏–π). –í—Ç–æ—Ä–æ–µ: –≥–æ—Ä–æ—Å–∫–æ–ø—ã –≤—Å–µ–≥–¥–∞ —Å–æ–¥–µ—Ä–∂–∞—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø–∞—Ä—Ç–Ω–µ—Ä–µ –∏ –¥–æ–º–µ, –¥–∞–∂–µ –µ—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –∑–∞–ø–æ–ª–Ω–∏–ª –ø–∞—Ä—Ç–Ω–µ—Ä–∞ –≤ –ø—Ä–æ—Ñ–∏–ª–µ –∏ –Ω–µ —É–∫–∞–∑–∞–ª, —á—Ç–æ —É –Ω–µ–≥–æ –µ—Å—Ç—å –ø–∞—Ä—Ç–Ω–µ—Ä. –ù—É–∂–Ω–æ: 1) –£–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ —è–∑—ã–∫–æ–≤–æ–π –ø–∞—Ä–∞–º–µ—Ç—Ä (i18n.language) –ø–µ—Ä–µ–¥–∞—ë—Ç—Å—è –≤–æ –≤—Å–µ AI —Ñ—É–Ω–∫—Ü–∏–∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –≥–æ—Ä–æ—Å–∫–æ–ø–æ–≤ (fetchDailyHoroscope, fetchWeeklyHoroscope, fetchSergeyDailyHoroscopeForDate –∏ –¥—Ä.), 2) –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É hasPartner(userPartner) –ø–µ—Ä–µ–¥ –≤–∫–ª—é—á–µ–Ω–∏–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –ø–∞—Ä—Ç–Ω–µ—Ä–µ –≤ –ø—Ä–æ–º–ø—Ç—ã - –µ—Å–ª–∏ –ø–∞—Ä—Ç–Ω–µ—Ä–∞ –Ω–µ—Ç, —ç—Ç–æ—Ç —Ä–∞–∑–¥–µ–ª –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –∏—Å–∫–ª—é—á—ë–Ω –∏–∑ —Ç–µ–∫—Å—Ç–∞, 3) –û–±–Ω–æ–≤–∏—Ç—å —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏ –≤ horoscope.ts –¥–ª—è –∞–¥–∞–ø—Ç–∏–≤–Ω–æ–π –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏–∏ –∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –∫–æ–Ω—Ç–µ–Ω—Ç–∞ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –Ω–∞–ª–∏—á–∏—è –ø–∞—Ä—Ç–Ω–µ—Ä–∞.

**Tags:** horoscope, i18n, localization, partner, personalization, adaptive-content

**Related files:**
- src/utils/horoscope.ts
- src/components/ModernNastiaApp.tsx
- src/utils/userContext.ts

**Notes:** –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ–±–Ω–∞—Ä—É–∂–∏–ª –¥–≤–∞ –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö –¥–µ—Ñ–µ–∫—Ç–∞ –≤ –≥–æ—Ä–æ—Å–∫–æ–ø–∞—Ö: 1) –Ø–∑—ã–∫ –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏–∏ –Ω–µ –ø–µ—Ä–µ–¥–∞—ë—Ç—Å—è/–Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è - –≥–æ—Ä–æ—Å–∫–æ–ø—ã –Ω–∞ —Ä—É—Å—Å–∫–æ–º –≤–º–µ—Å—Ç–æ –∞–Ω–≥–ª–∏–π—Å–∫–æ–≥–æ/–Ω–µ–º–µ—Ü–∫–æ–≥–æ. 2) –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø–∞—Ä—Ç–Ω–µ—Ä–µ –∏ –¥–æ–º–µ –≤—Å–µ–≥–¥–∞ –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É–µ—Ç - –Ω—É–∂–Ω–æ —É—Å–ª–æ–≤–Ω–æ–µ –≤–∫–ª—é—á–µ–Ω–∏–µ –Ω–∞ –æ—Å–Ω–æ–≤–µ hasPartner(userPartner). –†–µ—à–µ–Ω–∏–µ –¥–æ–ª–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å TASK-016 –∞–¥–∞–ø—Ç–∏–≤–Ω—É—é –ª–æ–≥–∏–∫—É (–ø—Ä–æ–≤–µ—Ä–∫–∞ hasPartner –ø–µ—Ä–µ–¥ –≤–∫–ª—é—á–µ–Ω–∏–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –ø–∞—Ä—Ç–Ω–µ—Ä–µ) –∏ –¥–æ–±–∞–≤–∏—Ç—å language –ø–∞—Ä–∞–º–µ—Ç—Ä –≤ —Ü–µ–ø—å –ø–µ—Ä–µ–¥–∞—á–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –æ—Ç ModernNastiaApp ‚Üí AI functions.

---

### ‚úÖ TASK-027: –ó–∞–º–µ–Ω–∏—Ç—å –∑–∞–≥–æ–ª–æ–≤–∫–∏ –Ω–∞ Flomoon –∏ –æ–±–Ω–æ–≤–∏—Ç—å –Ω–∞–∑–≤–∞–Ω–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

**Category:** chore | **Priority:** üü° medium | **Status:** done

**Complexity:** simple

–û–±–Ω–æ–≤–∏—Ç—å –≤—Å–µ –∑–∞–≥–æ–ª–æ–≤–∫–∏ –∏ –Ω–∞–∑–≤–∞–Ω–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –Ω–∞ 'Flomoon' –≤–º–µ—Å—Ç–æ —Å—Ç–∞—Ä–æ–≥–æ –Ω–∞–∑–≤–∞–Ω–∏—è 'Nastya' –∏–ª–∏ '–ù–∞—Å—Ç—è'. –¢—Ä–µ–±—É–µ—Ç—Å—è: 1) –û–±–Ω–æ–≤–∏—Ç—å –∑–∞–≥–æ–ª–æ–≤–æ–∫ –≤ public/index.html (<title>Flomoon</title>), 2) –û–±–Ω–æ–≤–∏—Ç—å –Ω–∞–∑–≤–∞–Ω–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –≤ package.json (name, description), 3) –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤—Å–µ –º–µ—Ç–∞—Ç–µ–≥–∏ (description, og:title, og:description) –≤ index.html –∏ manifest.json, 4) –û–±–Ω–æ–≤–∏—Ç—å —Ç–µ–∫—Å—Ç –≤ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞—Ö –µ—Å–ª–∏ –µ—Å—Ç—å —Å—Å—ã–ª–∫–∏ –Ω–∞ —Å—Ç–∞—Ä–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –≤ UI (–Ω–∞–ø—Ä–∏–º–µ—Ä –≤ Settings, About, –∏–ª–∏ –¥—Ä—É–≥–∏—Ö –º–æ–¥–∞–ª—å–Ω—ã—Ö –æ–∫–Ω–∞—Ö), 5) –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ñ–∞–π–ª—ã –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –∏ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –≤ –∫–æ–¥–µ (–µ—Å–ª–∏ —É–ø–æ–º–∏–Ω–∞–µ—Ç—Å—è —Å—Ç–∞—Ä–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ Nastya), 6) –û–±–Ω–æ–≤–∏—Ç—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –∏–Ω—ã–µ –º–µ—Å—Ç–∞ –≥–¥–µ –º–æ–∂–µ—Ç –±—ã—Ç—å —É–ø–æ–º–∏–Ω–∞–Ω–∏–µ —Å—Ç–∞—Ä–æ–≥–æ –Ω–∞–∑–≤–∞–Ω–∏—è. –ü–æ—Å–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —á—Ç–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è, –∑–∞–≥–æ–ª–æ–≤–æ–∫ –±—Ä–∞—É–∑–µ—Ä–∞ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç 'Flomoon', –∏ –≤—Å–µ —Å—Å—ã–ª–∫–∏ —Ä–∞–±–æ—Ç–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ.

**Tags:** branding, config, naming, chore, ui

**Related files:**
- public/index.html
- package.json
- public/manifest.json
- src/components/ModernNastiaApp.tsx
- src/App.tsx

**Notes:** ‚úÖ –ó–∞–≤–µ—Ä—à–µ–Ω–æ: 1) public/index.html - <title>Flomoon</title> –∏ description –æ–±–Ω–æ–≤–ª–µ–Ω—ã, 2) public/manifest.json - name –∏ short_name –∏–∑–º–µ–Ω–µ–Ω—ã –Ω–∞ 'Flomoon', 3) ModernNastiaApp.tsx - fallback title –¥–ª—è push-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π 'Flomoon', 4) package.json - —É–∂–µ —Å–æ–¥–µ—Ä–∂–∞–ª –ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ 'flomoon', 5) –ù–∞—Å—Ç—Ä–æ–µ–Ω –∫–∞—Å—Ç–æ–º–Ω—ã–π –¥–æ–º–µ–Ω flomoon.app (CNAME —Ñ–∞–π–ª –¥–æ–±–∞–≤–ª–µ–Ω, homepage –æ–±–Ω–æ–≤–ª—ë–Ω), 6) –í–µ—Ä—Å–∏–∏ 0.3.13 –∏ 0.3.14 –∑–∞–¥–µ–ø–ª–æ–µ–Ω—ã. –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –Ω–∞–∑–≤–∞–Ω–∏—è (TypeScript types, –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ) –æ—Å—Ç–∞–≤–ª–µ–Ω—ã –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π. –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–Ω–æ –Ω–∞ https://flomoon.app

---

### üìã TASK-028: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–æ–º–ø—Ç—ã –≥–æ—Ä–æ—Å–∫–æ–ø–æ–≤ - —É–±—Ä–∞—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø–∞—Ä—Ç–Ω–µ—Ä–µ –µ—Å–ª–∏ –µ–≥–æ –Ω–µ—Ç

**Category:** bug | **Priority:** üü† high | **Status:** backlog

**Complexity:** simple

–ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –≥–æ—Ä–æ—Å–∫–æ–ø—ã –∞–¥–∞–ø—Ç–∏–≤–Ω–æ –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –Ω–∞–ª–∏—á–∏—è –ø–∞—Ä—Ç–Ω–µ—Ä–∞. –ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –∑–∞–ø–æ–ª–Ω–∏–ª –¥–∞–Ω–Ω—ã–µ –ø–∞—Ä—Ç–Ω–µ—Ä–∞ (userPartner === null –∏–ª–∏ !hasPartner(userPartner)), —Ç–æ –≤ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ–º—ã–π —Ç–µ–∫—Å—Ç –≥–æ—Ä–æ—Å–∫–æ–ø–∞ –ù–ï –¥–æ–ª–∂–Ω—ã –≤–∫–ª—é—á–∞—Ç—å—Å—è: 1) —Ä–∞–∑–¥–µ–ª—ã –ø—Ä–æ –ø–∞—Ä—Ç–Ω–µ—Ä–∞, —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å, –µ–≥–æ —ç–º–æ—Ü–∏–∏, 2) –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è –ø—Ä–æ –æ–±—â–∏–µ –¥–µ–ª–∞, —á—Ç–æ –≤–∞—Å –∂–¥—ë—Ç –¥–æ–º–∞. –ù—É–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —Ñ—É–Ω–∫—Ü–∏–∏ buildDailyPrompt(), buildWeeklyPrompt(), buildSergeyDailyPrompt() –≤ horoscope.ts - —É–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ –ª–æ–≥–∏–∫–∞ —É—Å–ª–æ–≤–Ω–æ–≥–æ –≤–∫–ª—é—á–µ–Ω–∏—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –ø–∞—Ä—Ç–Ω–µ—Ä–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ. –ú–æ–∂–µ—Ç –±—ã—Ç—å, –ø—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ –ø–∞—Ä—Ç–Ω–µ—Ä–∞ –ø—Ä–æ–º–ø—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±—Ä–µ–∑–∞–µ—Ç —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–µ —Ä–∞–∑–¥–µ–ª—ã –∏–ª–∏ –ø–µ—Ä–µ–ø–∏—Å—ã–≤–∞–µ—Ç —Ñ—Ä–∞–∑—ã –Ω–∞ –±–æ–ª–µ–µ –ª–∏—á–Ω—ã–µ (–ø—Ä–æ —Å–∞–º–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, –∞ –Ω–µ –ø—Ä–æ –¥–æ–º–∞—à–Ω—é—é —Å–∏—Ç—É–∞—Ü–∏—é). –¢–∞–∫–∂–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ information –æ –¥–æ–º–µ, —Å–µ–º—å–µ, –ø–∞—Ä—Ç–Ω–µ—Ä–µ –ø–æ–ª–Ω–æ—Å—Ç—å—é –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –≤ —Ç–µ–∫—Å—Ç–µ –≥–æ—Ä–æ—Å–∫–æ–ø–∞ –µ—Å–ª–∏ userPartner === null.

**Tags:** horoscope, ai, partner, prompts, adaptive-content, personalization

**Related files:**
- src/utils/horoscope.ts
- src/utils/userContext.ts
- src/components/ModernNastiaApp.tsx

**Notes:** –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —É–∫–∞–∑–∞–ª –ø—Ä–æ–±–ª–µ–º—É: –≥–æ—Ä–æ—Å–∫–æ–ø—ã —Å–æ–¥–µ—Ä–∂–∞—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø–∞—Ä—Ç–Ω–µ—Ä–µ –∏ –¥–æ–º–µ, –¥–∞–∂–µ –µ—Å–ª–∏ —É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –Ω–µ—Ç –ø–∞—Ä—Ç–Ω–µ—Ä–∞ –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö. –ù—É–∂–Ω–æ —É–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ —Ñ—É–Ω–∫—Ü–∏–∏ buildDailyPrompt(), buildWeeklyPrompt(), buildSergeyDailyPrompt() –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –∏—Å–ø–æ–ª—å–∑—É—é—Ç hasPartner(userPartner) –¥–ª—è —É—Å–ª–æ–≤–Ω–æ–≥–æ –≤–∫–ª—é—á–µ–Ω–∏—è —Ä–∞–∑–¥–µ–ª–æ–≤ –æ –ø–∞—Ä—Ç–Ω–µ—Ä–µ. –ï—Å–ª–∏ –ª–æ–≥–∏–∫–∞ —É–∂–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –≤ TASK-016 - –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –æ–Ω–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ.

---

### üîÑ TASK-029: –ò—Å–ø—Ä–∞–≤–∏—Ç—å –Ω–∞–∑–≤–∞–Ω–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –≤ push-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è—Ö –Ω–∞ Flomoon

**Category:** bug | **Priority:** üü† high | **Status:** in-progress

**Complexity:** simple

–í push-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è—Ö –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è —Å—Ç–∞—Ä–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ 'Nastia Calendar' –≤–º–µ—Å—Ç–æ –Ω–æ–≤–æ–≥–æ 'Flomoon'. –ù—É–∂–Ω–æ –Ω–∞–π—Ç–∏ –∏ –∑–∞–º–µ–Ω–∏—Ç—å —Ç–µ–∫—Å—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –Ω–∞ –≤—Å–µ –º–µ—Å—Ç–∞—Ö –≥–¥–µ –æ–Ω–æ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è: 1) –ü—Ä–æ–≤–µ—Ä–∏—Ç—å src/utils/pushNotifications.ts - –æ–±–Ω–æ–≤–∏—Ç—å fallback –∑–∞–≥–æ–ª–æ–≤–æ–∫ –¥–ª—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π, 2) –ü—Ä–æ–≤–µ—Ä–∏—Ç—å src/service-worker.ts - –æ–±–Ω–æ–≤–∏—Ç—å title –∏ —Ç–µ–∫—Å—Ç –ø—Ä–∏ –æ–±—Ä–∞–±–æ—Ç–∫–µ push —Å–æ–±—ã—Ç–∏—è, 3) –ü—Ä–æ–≤–µ—Ä–∏—Ç—å public/manifest.json - —É–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ short_name –∏ name —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã –Ω–∞ 'Flomoon', 4) –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤—Å–µ –º–µ—Å—Ç–∞ –≥–¥–µ —Å–æ–∑–¥–∞—é—Ç—Å—è notification –æ–±—ä–µ–∫—Ç—ã (–Ω–∞–ø—Ä–∏–º–µ—Ä –≤ generateLocalNotification() –∏–ª–∏ –≤—ã–∑–æ–≤–∞—Ö self.registration.showNotification()), 5) –û–±–Ω–æ–≤–∏—Ç—å fallback —Ç–µ–∫—Å—Ç –∑–∞–≥–æ–ª–æ–≤–∫–∞ –µ—Å–ª–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –Ω–µ —Å–æ–¥–µ—Ä–∂–∏—Ç —è–≤–Ω–æ–≥–æ –∑–∞–≥–æ–ª–æ–≤–∫–∞ –∏–∑ —Å–µ—Ä–≤–µ—Ä–∞. –ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —á—Ç–æ push-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è –æ—Ç –∏–º–µ–Ω–∏ 'Flomoon'.

**Tags:** push-notifications, branding, service-worker, ux, ui

**Related files:**
- src/utils/pushNotifications.ts
- src/service-worker.ts
- public/manifest.json
- src/utils/notificationsStorage.ts

**Notes:** –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ–±–Ω–∞—Ä—É–∂–∏–ª —á—Ç–æ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ø—Ä–∏—Ö–æ–¥—è—Ç –æ—Ç 'Nastia Calendar' –≤–º–µ—Å—Ç–æ 'Flomoon' (–Ω–æ–≤–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ). –≠—Ç–æ –æ–¥–Ω–∞ –∏–∑ –ø–æ—Å–ª–µ–¥–Ω–∏—Ö –∑–∞–¥–∞—á —Ä–µ–±—Ä–µ–Ω–¥–∏–Ω–≥–∞ (TASK-027 —É–∂–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∞ –¥–ª—è UI). –ù—É–∂–Ω–æ –Ω–∞–π—Ç–∏ –≥–¥–µ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –∑–∞–≥–æ–ª–æ–≤–æ–∫ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –∏ –∑–∞–º–µ–Ω–∏—Ç—å. –°–∫–æ—Ä–µ–µ –≤—Å–µ–≥–æ –≤ pushNotifications.ts –∏–ª–∏ service-worker.ts –≤ —Ñ—É–Ω–∫—Ü–∏–∏ showNotification().

---

