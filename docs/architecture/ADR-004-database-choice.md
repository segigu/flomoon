# ADR-004: –í—ã–±–æ—Ä –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö (Supabase)

**–î–∞—Ç–∞:** 2025-10-26
**–°—Ç–∞—Ç—É—Å:** –ü—Ä–∏–Ω—è—Ç–æ
**–ê–≤—Ç–æ—Ä—ã:** –ê–≥–µ–Ω—Ç –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è + –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑

---

## –ö–æ–Ω—Ç–µ–∫—Å—Ç

Nastia Calendar –∏–∑–Ω–∞—á–∞–ª—å–Ω–æ –±—ã–ª **–ª–∏—á–Ω—ã–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ–º –¥–ª—è 1 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è** (–ù–∞—Å—Ç—è). –î–∞–Ω–Ω—ã–µ —Ö—Ä–∞–Ω–∏–ª–∏—Å—å –≤ localStorage + —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ GitHub API (–≤ –ø—Ä–∏–≤–∞—Ç–Ω—ã–π —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π nastia-data).

**–ò–∑–º–µ–Ω–µ–Ω–∏–µ –∫–æ–Ω—Ü–µ–ø—Ü–∏–∏:** –ü—Ä–æ–µ–∫—Ç —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è **–ø—É–±–ª–∏—á–Ω—ã–º –º–Ω–æ–≥–æ–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ–º**.

**–ß—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:**
- –ú–µ–Ω—Å—Ç—Ä—É–∞–ª—å–Ω—ã–µ —Ü–∏–∫–ª—ã (–¥–∞—Ç—ã, –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å, —Å–∏–º–ø—Ç–æ–º—ã)
- –ù–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ –ø–æ –¥–Ω—è–º
- –ü—Å–∏—Ö–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã (–§–∞–∑–∞ 3)
- –í—ã–±–æ—Ä—ã –≤ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã—Ö –∏—Å—Ç–æ—Ä–∏—è—Ö

**–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è:**
1. –ú—É–ª—å—Ç–∏–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å (–∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è, –∏–∑–æ–ª—è—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö)
2. Privacy & Security (RLS, —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ, GDPR compliance)
3. Scalability (–ø–æ–¥–¥–µ—Ä–∂–∫–∞ 100+ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π)
4. Offline-first (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ - –º–æ–∂–Ω–æ –æ—Ç–ª–æ–∂–∏—Ç—å)
5. –°—Ç–æ–∏–º–æ—Å—Ç—å (–º–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –¥–ª—è MVP)

---

## –ü—Ä–æ–±–ª–µ–º–∞

localStorage + GitHub sync **–Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –º–Ω–æ–≥–æ–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π —Ä–µ–∂–∏–º**:
- –ù–µ—Ç –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ (–≤—Å–µ –¥–∞–Ω–Ω—ã–µ –¥–æ—Å—Ç—É–ø–Ω—ã –ª—é–±–æ–º—É, –∫—Ç–æ –æ—Ç–∫—Ä—ã–ª –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ)
- –ù–µ—Ç –∏–∑–æ–ª—è—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö (–≤—Å–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –≤–∏–¥—è—Ç –æ–¥–Ω–∏ –∏ —Ç–µ –∂–µ –¥–∞–Ω–Ω—ã–µ)
- GitHub sync –Ω–µ –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ—Ç—Å—è (–∫–æ–Ω—Ñ–ª–∏–∫—Ç—ã –ø—Ä–∏ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–π –∑–∞–ø–∏—Å–∏)

**–ù—É–∂–Ω–∞ –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö** —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π:
- Auth (Email + Password, OAuth)
- Row Level Security (user A –Ω–µ –≤–∏–¥–∏—Ç –¥–∞–Ω–Ω—ã–µ user B)
- Structured data (—Ü–∏–∫–ª—ã, –¥–∞—Ç—ã, JSONB –¥–ª—è —Å–ª–æ–∂–Ω—ã—Ö —Å—Ç—Ä—É–∫—Ç—É—Ä)

---

## –†–∞—Å—Å–º–æ—Ç—Ä–µ–Ω–Ω—ã–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã

### –í–∞—Ä–∏–∞–Ω—Ç A: Supabase

**–û–ø–∏—Å–∞–Ω–∏–µ:** Managed PostgreSQL + Auth + RLS + Edge Functions. Open-source (–º–æ–∂–Ω–æ self-host –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏).

**–ü–ª—é—Å—ã:**
- ‚úÖ Auth –∏–∑ –∫–æ—Ä–æ–±–∫–∏ (Email, OAuth, Magic Links)
- ‚úÖ Row Level Security (PostgreSQL RLS) - –ª—É—á—à–∞—è –∑–∞—â–∏—Ç–∞ –¥–ª—è —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ PostgreSQL - SQL –±–∞–∑–∞, –æ—Ç–ª–∏—á–Ω–æ –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è structured data (—Ü–∏–∫–ª—ã, –¥–∞—Ç—ã)
- ‚úÖ Realtime subscriptions (—Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –º–µ–∂–¥—É —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞–º–∏)
- ‚úÖ Edge Functions (serverless –ª–æ–≥–∏–∫–∞ –±–µ–∑ –æ—Ç–¥–µ–ª—å–Ω–æ–≥–æ backend)
- ‚úÖ Free tier –¥–æ—Å—Ç–∞—Ç–æ—á–µ–Ω –¥–ª—è MVP (500MB –±–∞–∑–∞, 5GB bandwidth, 50k MAU)
- ‚úÖ –•–æ—Ä–æ—à–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –∏ –∞–∫—Ç–∏–≤–Ω–æ–µ community
- ‚úÖ Open-source (–º–æ–∂–Ω–æ self-host –µ—Å–ª–∏ –∑–∞—Ö–æ—á–µ—Ç—Å—è)

**–ú–∏–Ω—É—Å—ã:**
- ‚ö†Ô∏è Vendor lock-in (–º–∏–≥—Ä–∞—Ü–∏—è –Ω–∞ –¥—Ä—É–≥—É—é –ë–î —Å–ª–æ–∂–Ω–∞—è)
- ‚ö†Ô∏è Free tier –æ–≥—Ä–∞–Ω–∏—á–µ–Ω (2 –ø—Ä–æ–µ–∫—Ç–∞, –ø—Ä–æ–µ–∫—Ç—ã –∑–∞—Å—ã–ø–∞—é—Ç –ø–æ—Å–ª–µ –Ω–µ–¥–µ–ª–∏ –Ω–µ–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏)
- ‚ö†Ô∏è –î–∞–Ω–Ω—ã–µ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ Supabase (–Ω–µ self-hosted, –Ω–æ Supabase —Å–µ—Ä—Ç–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω SOC 2, ISO 27001)

**–°—Ç–æ–∏–º–æ—Å—Ç—å:**
- Free: $0/–º–µ—Å—è—Ü (500MB –±–∞–∑–∞, 5GB bandwidth, 50k MAU) - –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–ª—è MVP
- Pro: $25/–º–µ—Å—è—Ü (8GB –±–∞–∑–∞, 250GB bandwidth, –±–µ–∑ –∑–∞—Å—ã–ø–∞–Ω–∏—è –ø—Ä–æ–µ–∫—Ç–æ–≤) - –∫–æ–≥–¥–∞ –≤—ã—Ä–∞—Å—Ç–µ–º

**–í—Ä–µ–º—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏:** 40-50 —á–∞—Å–æ–≤ (8-10 –¥–Ω–µ–π)

---

### –í–∞—Ä–∏–∞–Ω—Ç B: Firebase

**–û–ø–∏—Å–∞–Ω–∏–µ:** Google managed backend (Firestore NoSQL + Auth + Functions + Hosting).

**–ü–ª—é—Å—ã:**
- ‚úÖ Auth –∏–∑ –∫–æ—Ä–æ–±–∫–∏
- ‚úÖ Firestore (NoSQL) - –ø—Ä–æ—Å—Ç–∞—è –¥–ª—è –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö use cases
- ‚úÖ Firebase Cloud Functions
- ‚úÖ Firebase Hosting + CDN
- ‚úÖ –•–æ—Ä–æ—à–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Google Services

**–ú–∏–Ω—É—Å—ã:**
- ‚ùå Firestore Security Rules —Å–ª–æ–∂–Ω–µ–µ —á–µ–º PostgreSQL RLS
- ‚ùå NoSQL (Firestore) vs SQL (PostgreSQL) - –¥–ª—è –Ω–∞—à–µ–≥–æ —Å–ª—É—á–∞—è SQL –ª—É—á—à–µ (—Ü–∏–∫–ª—ã, –¥–∞—Ç—ã, join'—ã)
- ‚ùå –ë–æ–ª–µ–µ –¥–æ—Ä–æ–≥–æ–π scaling (–ø–ª–∞—Ç–∏—à—å –∑–∞ —á—Ç–µ–Ω–∏–µ/–∑–∞–ø–∏—Å—å)
- ‚ùå Vendor lock-in (–º–∏–≥—Ä–∞—Ü–∏—è —Å Firestore —Å–ª–æ–∂–Ω–∞—è)

**–°—Ç–æ–∏–º–æ—Å—Ç—å:**
- Free: Spark plan (1GB storage, 10GB/month transfer, 50k reads/day)
- Paid: Blaze (pay-as-you-go, –¥–æ—Ä–æ–∂–µ —á–µ–º Supabase –ø—Ä–∏ —Ä–æ—Å—Ç–µ)

**–í—Ä–µ–º—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏:** 45-55 —á–∞—Å–æ–≤

**–ü–æ—á–µ–º—É –ù–ï –≤—ã–±—Ä–∞–Ω:** RLS –≤ Supabase –Ω–∞–º–Ω–æ–≥–æ –ª—É—á—à–µ –¥–ª—è –∑–∞—â–∏—Ç—ã —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö. PostgreSQL —É–¥–æ–±–Ω–µ–µ –¥–ª—è structured data (—Ü–∏–∫–ª—ã —Å –¥–∞—Ç–∞–º–∏, join —Ç–∞–±–ª–∏—Ü).

---

### –í–∞—Ä–∏–∞–Ω—Ç C: Self-hosted PostgreSQL + Auth0

**–û–ø–∏—Å–∞–Ω–∏–µ:** –°–≤–æ–π VPS (Digital Ocean, AWS) + PostgreSQL + Auth0 (managed auth) + nginx.

**–ü–ª—é—Å—ã:**
- ‚úÖ –ü–æ–ª–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª—å (—Å–≤–æ–π —Å–µ—Ä–≤–µ—Ä, —Å–≤–æ–∏ –¥–∞–Ω–Ω—ã–µ)
- ‚úÖ PostgreSQL –º–æ—â–Ω–µ–µ (–ª—é–±—ã–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è, —Ñ—É–Ω–∫—Ü–∏–∏)
- ‚úÖ Auth0 - –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–∞—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è (OAuth, MFA, –∏ —Ç.–¥.)
- ‚úÖ –ù–µ—Ç vendor lock-in (–º–æ–∂–µ—à—å –º–∏–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –∫—É–¥–∞ —É–≥–æ–¥–Ω–æ)

**–ú–∏–Ω—É—Å—ã:**
- ‚ùå –ù—É–∂–Ω–æ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—Ç—å VPS (Digital Ocean, AWS)
- ‚ùå –ù—É–∂–Ω–æ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—Ç—å PostgreSQL, nginx, SSL, backup, monitoring
- ‚ùå –ù—É–∂–Ω–æ –æ–±–Ω–æ–≤–ª—è—Ç—å –∏ –ø–∞—Ç—á–∏—Ç—å —Å–µ—Ä–≤–µ—Ä (security updates)
- ‚ùå Auth0 –ø–ª–∞—Ç–Ω—ã–π ($23/–º–µ—Å—è—Ü –¥–ª—è production, free —Ç–æ–ª—å–∫–æ –¥–æ 7k MAU)
- ‚ùå –ù–∞–º–Ω–æ–≥–æ –±–æ–ª—å—à–µ –≤—Ä–µ–º–µ–Ω–∏ (~2-3 –Ω–µ–¥–µ–ª–∏ –≤–º–µ—Å—Ç–æ 8-10 –¥–Ω–µ–π)
- ‚ùå Ongoing maintenance (backup, monitoring, scaling)

**–°—Ç–æ–∏–º–æ—Å—Ç—å:**
- VPS: $5-10/–º–µ—Å—è—Ü (DigitalOcean Droplet)
- Auth0: $0 (–¥–æ 7k MAU) ‚Üí $23/–º–µ—Å—è—Ü (production)
- **–ò—Ç–æ–≥–æ:** $5-33/–º–µ—Å—è—Ü + —Ç–≤–æ—ë –≤—Ä–µ–º—è –Ω–∞ –Ω–∞—Å—Ç—Ä–æ–π–∫—É

**–í—Ä–µ–º—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏:** 80-120 —á–∞—Å–æ–≤ (2-3 –Ω–µ–¥–µ–ª–∏)

**–ü–æ—á–µ–º—É –ù–ï –≤—ã–±—Ä–∞–Ω:** –û–≤–µ—Ä–∫–∏–ª–ª –¥–ª—è MVP. Supabase –¥–∞—ë—Ç —Ç–µ –∂–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –±–µ–∑ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã. –ú–æ–∂–Ω–æ –º–∏–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ self-hosted –ø–æ–∑–∂–µ –µ—Å–ª–∏ –ø–æ–Ω–∞–¥–æ–±–∏—Ç—Å—è (Supabase open-source).

---

### –í–∞—Ä–∏–∞–Ω—Ç D: –û—Å—Ç–∞—Ç—å—Å—è –Ω–∞ localStorage + GitHub sync

**–û–ø–∏—Å–∞–Ω–∏–µ:** –ü—Ä–æ–¥–æ–ª–∂–∞—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–µ–∫—É—â–µ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ (localStorage + —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ GitHub API).

**–ü–ª—é—Å—ã:**
- ‚úÖ –£–∂–µ —Ä–∞–±–æ—Ç–∞–µ—Ç (0 –≤—Ä–µ–º–µ–Ω–∏ –Ω–∞ –º–∏–≥—Ä–∞—Ü–∏—é)
- ‚úÖ $0 —Å—Ç–æ–∏–º–æ—Å—Ç—å –Ω–∞–≤—Å–µ–≥–¥–∞
- ‚úÖ –ü–æ–ª–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª—å –Ω–∞–¥ –¥–∞–Ω–Ω—ã–º–∏ (–Ω–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è)
- ‚úÖ Offline-first –∏–∑ –∫–æ—Ä–æ–±–∫–∏

**–ú–∏–Ω—É—Å—ã:**
- ‚ùå **–ù–ï –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –º–Ω–æ–≥–æ–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π —Ä–µ–∂–∏–º** (–∫—Ä–∏—Ç–∏—á–Ω–æ!)
- ‚ùå –ù–µ–ª—å–∑—è –¥–∞—Ç—å –¥–æ—Å—Ç—É–ø –¥—Ä—É–∑—å—è–º/–¥—Ä—É–≥–∏–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º
- ‚ùå –ù–µ—Ç –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
- ‚ùå –ù–µ—Ç –ø—É–±–ª–∏—á–Ω–æ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- ‚ùå –ë–ª–æ–∫–∏—Ä—É–µ—Ç –§–∞–∑—É 3 (AI-–∞–≥–µ–Ω—Ç—ã –Ω–µ –º–æ–≥—É—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ)

**–í—Ä–µ–º—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏:** 0 —á–∞—Å–æ–≤ (–Ω–∏—á–µ–≥–æ –Ω–µ –¥–µ–ª–∞–µ–º)

**–ü–æ—á–µ–º—É –ù–ï –≤—ã–±—Ä–∞–Ω:** –ù–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –Ω–æ–≤–æ–π —Ü–µ–ª–∏ –ø—Ä–æ–µ–∫—Ç–∞ - —Å–æ–∑–¥–∞—Ç—å –ø—É–±–ª–∏—á–Ω–æ–µ –º–Ω–æ–≥–æ–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ.

---

## –†–µ—à–µ–Ω–∏–µ

**–í—ã–±—Ä–∞–Ω –í–∞—Ä–∏–∞–Ω—Ç A: Supabase**

**–û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ:**
1. **RLS –∏–∑ –∫–æ—Ä–æ–±–∫–∏** - –ª—É—á—à–∞—è –∑–∞—â–∏—Ç–∞ —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –º–Ω–æ–≥–æ–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
2. **PostgreSQL** - SQL –±–∞–∑–∞ –∏–¥–µ–∞–ª—å–Ω–∞ –¥–ª—è structured data (—Ü–∏–∫–ª—ã, –¥–∞—Ç—ã, –∫–æ—Ä—Ä–µ–ª—è—Ü–∏–∏)
3. **Auth –∏–∑ –∫–æ—Ä–æ–±–∫–∏** - Email + Password + OAuth –±–µ–∑ –Ω–∞–ø–∏—Å–∞–Ω–∏—è backend
4. **Free tier –¥–æ—Å—Ç–∞—Ç–æ—á–µ–Ω –¥–ª—è MVP** - 500MB –±–∞–∑–∞, 5GB bandwidth, 50k MAU
5. **–ë—ã—Å—Ç—Ä–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞** - 8-10 –¥–Ω–µ–π –≤–º–µ—Å—Ç–æ 2-3 –Ω–µ–¥–µ–ª—å (self-hosted)
6. **Open-source** - –º–æ–∂–Ω–æ self-host –µ—Å–ª–∏ –∑–∞—Ö–æ—á–µ—Ç—Å—è –≤ –±—É–¥—É—â–µ–º
7. **SOC 2 / ISO 27001** - —Å–µ—Ä—å—ë–∑–Ω–∞—è —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –¥–ª—è —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö

---

## –ü–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è

### –ü–æ–∑–∏—Ç–∏–≤–Ω—ã–µ

- ‚úÖ **–ú—É–ª—å—Ç–∏–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å** - –ª—é–±–æ–π –º–æ–∂–µ—Ç –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
- ‚úÖ **Privacy & Security** - RLS –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç, —á—Ç–æ user A –Ω–µ –≤–∏–¥–∏—Ç –¥–∞–Ω–Ω—ã–µ user B
- ‚úÖ **–§–∞–∑–∞ 3 (AI-–∞–≥–µ–Ω—Ç—ã)** –º–æ–∂–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ (–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –±–µ–∑ –æ—Ç–ø—Ä–∞–≤–∫–∏ –Ω–∞ –∫–ª–∏–µ–Ω—Ç)
- ‚úÖ **Scalability** - Supabase –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ—Ç—Å—è (–¥–æ –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω–æ–≥–æ –ø—Ä–µ–¥–µ–ª–∞)
- ‚úÖ **Realtime sync** - –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É—é—Ç—Å—è –º–µ–∂–¥—É —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞–º–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
- ‚úÖ **Managed infrastructure** - –Ω–µ –Ω—É–∂–Ω–æ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—Ç—å VPS, backup, monitoring

### –ù–µ–≥–∞—Ç–∏–≤–Ω—ã–µ

- ‚ö†Ô∏è **Vendor lock-in** - –º–∏–≥—Ä–∞—Ü–∏—è –Ω–∞ –¥—Ä—É–≥—É—é –ë–î —Å–ª–æ–∂–Ω–∞—è (–Ω–æ Supabase open-source, –º–æ–∂–Ω–æ self-host)
- ‚ö†Ô∏è **Free tier limitations** - –ø—Ä–æ–µ–∫—Ç—ã –∑–∞—Å—ã–ø–∞—é—Ç –ø–æ—Å–ª–µ –Ω–µ–¥–µ–ª–∏ –Ω–µ–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ (cold start ~1-2 —Å–µ–∫)
- ‚ö†Ô∏è **–î–∞–Ω–Ω—ã–µ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ Supabase** - –Ω–µ self-hosted (–Ω–æ Supabase —Å–µ—Ä—Ç–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω)
- ‚ö†Ô∏è **–°—Ç–æ–∏–º–æ—Å—Ç—å –ø—Ä–∏ —Ä–æ—Å—Ç–µ** - $25/–º–µ—Å—è—Ü –¥–ª—è Pro (–Ω–æ —Ç–æ–ª—å–∫–æ –∫–æ–≥–¥–∞ –≤—ã—Ä–∞—Å—Ç–µ–º >500MB –∏–ª–∏ >5GB bandwidth)
- ‚ö†Ô∏è **–£–¥–∞–ª–µ–Ω–∏–µ GitHub sync** - —Å—Ç–∞—Ä–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –±–æ–ª—å—à–µ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç (–Ω–æ –æ–Ω–∞ –Ω–µ –Ω—É–∂–Ω–∞)

### –†–∏—Å–∫–∏

1. **–ü–æ—Ç–µ—Ä—è –¥–∞–Ω–Ω—ã—Ö –ø—Ä–∏ –º–∏–≥—Ä–∞—Ü–∏–∏** - –º–∏—Ç–∏–≥–∞—Ü–∏—è: backup localStorage, dry-run –º–∏–≥—Ä–∞—Ü–∏–∏
2. **–£—Ç–µ—á–∫–∞ –¥–∞–Ω–Ω—ã—Ö —á–µ—Ä–µ–∑ RLS** - –º–∏—Ç–∏–≥–∞—Ü–∏—è: —Ç—â–∞—Ç–µ–ª—å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ policies
3. **Supabase –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω** - –º–∏—Ç–∏–≥–∞—Ü–∏—è: fallback UI, –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—à–∏–±–æ–∫
4. **Service Role Key —É—Ç–µ—á—ë—Ç** - –º–∏—Ç–∏–≥–∞—Ü–∏—è: –ù–ò–ö–û–ì–î–ê –Ω–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ, .env.local –≤ .gitignore

---

## –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—ã –¥–ª—è –±—É–¥—É—â–µ–≥–æ

–ï—Å–ª–∏ –≤ –±—É–¥—É—â–µ–º –ø–æ–Ω–∞–¥–æ–±–∏—Ç—Å—è –∏–∑–º–µ–Ω–∏—Ç—å —Ä–µ—à–µ–Ω–∏–µ:

1. **Self-host Supabase** (–µ—Å–ª–∏ –Ω—É–∂–µ–Ω –ø–æ–ª–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª—å) - Supabase open-source, –º–æ–∂–Ω–æ —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—å –Ω–∞ —Å–≤–æ—ë–º VPS
2. **–ú–∏–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ Firebase** (–µ—Å–ª–∏ –Ω—É–∂–Ω–∞ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Google Services) - ~2-3 –Ω–µ–¥–µ–ª–∏ —Ä–∞–±–æ—Ç—ã
3. **–ú–∏–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ self-hosted PostgreSQL** (–µ—Å–ª–∏ –Ω—É–∂–Ω–∞ –∫–∞—Å—Ç–æ–º–∏–∑–∞—Ü–∏—è) - ~1-2 –Ω–µ–¥–µ–ª–∏ —Ä–∞–±–æ—Ç—ã

**–ö—Ä–∏—Ç–µ—Ä–∏–π –¥–ª—è –ø–µ—Ä–µ—Å–º–æ—Ç—Ä–∞:**
- –°—É–º–º–∞—Ä–Ω—ã–µ —Ä–∞—Å—Ö–æ–¥—ã –Ω–∞ Supabase >$100/–º–µ—Å—è—Ü (unlikely –≤ –±–ª–∏–∂–∞–π—à–∏–µ 2-3 –≥–æ–¥–∞)
- –ù—É–∂–Ω–∞ —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å PostgreSQL, –∫–æ—Ç–æ—Ä–æ–π –Ω–µ—Ç –≤ Supabase
- –¢—Ä–µ–±–æ–≤–∞–Ω–∏–µ —Ö—Ä–∞–Ω–∏—Ç—å –¥–∞–Ω–Ω—ã–µ on-premise (—Ä–µ–≥—É–ª—è—Ç–æ—Ä–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã)

---

## Backend –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞: –¢–æ–Ω–∫–∏–π –∫–ª–∏–µ–Ω—Ç + Edge Functions

**–î–∞—Ç–∞ —Ä–µ—à–µ–Ω–∏—è:** 2025-10-26

**–ö–æ–Ω—Ç–µ–∫—Å—Ç:** –ü–æ—Å–ª–µ –≤—ã–±–æ—Ä–∞ Supabase –≤–æ–∑–Ω–∏–∫ –≤–æ–ø—Ä–æ—Å –æ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–∏ –ª–æ–≥–∏–∫–∏ –º–µ–∂–¥—É –∫–ª–∏–µ–Ω—Ç–æ–º –∏ —Å–µ—Ä–≤–µ—Ä–æ–º.

**–†–∞—Å—Å–º–æ—Ç—Ä–µ–Ω–Ω—ã–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã:**

### –í–∞—Ä–∏–∞–Ω—Ç A: SPA (–≤—Å—è –ª–æ–≥–∏–∫–∞ –≤ –±—Ä–∞—É–∑–µ—Ä–µ)
- –ë—Ä–∞—É–∑–µ—Ä: React + TypeScript + cycleUtils + aiClient
- –°–µ—Ä–≤–µ—Ä: —Ç–æ–ª—å–∫–æ –¥–∞–Ω–Ω—ã–µ (PostgreSQL)
- **–ú–∏–Ω—É—Å—ã:** API –∫–ª—é—á–∏ Claude/OpenAI –≤ .env –∫–ª–∏–µ–Ω—Ç–∞ (—Ä–∏—Å–∫ —É—Ç–µ—á–∫–∏), –Ω–µ—Ç –∫–æ–Ω—Ç—Ä–æ–ª—è —Å—Ç–æ–∏–º–æ—Å—Ç–∏

### –í–∞—Ä–∏–∞–Ω—Ç B: –¢–æ–Ω–∫–∏–π –∫–ª–∏–µ–Ω—Ç (–≤—ã–±—Ä–∞–Ω)
- –ë—Ä–∞—É–∑–µ—Ä: —Ç–æ–ª—å–∫–æ UI (React –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã + fetch)
- –°–µ—Ä–≤–µ—Ä: –≤—Å—è –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ (Edge Functions) + PostgreSQL
- **–ü–ª—é—Å—ã:**
  - üîí API –∫–ª—é—á–∏ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ (Supabase Secrets)
  - üí∞ –ö–æ–Ω—Ç—Ä–æ–ª—å —Å—Ç–æ–∏–º–æ—Å—Ç–∏ AI (rate limiting –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ)
  - üìä –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è –ª–æ–≥–∏–∫–∞ (–æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –±–µ–∑ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏ –∫–ª–∏–µ–Ω—Ç–∞)
  - ‚ö° –¢—è–∂—ë–ª—ã–µ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
- **–ú–∏–Ω—É—Å—ã:** –ù–µ—Ç offline —Ä–µ–∂–∏–º–∞ (—ç—Ç–æ ok, —Ç–µ–∫—É—â–∞—è GitHub sync —Ç–æ–∂–µ —Ç—Ä–µ–±—É–µ—Ç –∏–Ω—Ç–µ—Ä–Ω–µ—Ç)

**–†–µ—à–µ–Ω–∏–µ:** –í–∞—Ä–∏–∞–Ω—Ç B - —Ç–æ–Ω–∫–∏–π –∫–ª–∏–µ–Ω—Ç.

**–†–µ–∞–ª–∏–∑–∞—Ü–∏—è:**
- –ú–∏–≥—Ä–∞—Ü–∏—è `cycleUtils.ts` ‚Üí Edge Function `/supabase/functions/calculate-cycle`
- –ú–∏–≥—Ä–∞—Ü–∏—è `aiClient.ts` ‚Üí Edge Function `/supabase/functions/generate-ai-content`
- –°–æ–∑–¥–∞–Ω–∏–µ API —Å–ª–æ—è `/src/utils/api.ts` –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ
- Rate limiting: 10 AI –∑–∞–ø—Ä–æ—Å–æ–≤/—á–∞—Å –Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

**–°—Ç–æ–∏–º–æ—Å—Ç—å Edge Functions (Supabase):**
- Free: 500k invocations/month (~16k/–¥–µ–Ω—å)
- –î–ª—è 100 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π √ó 10 –æ–ø–µ—Ä–∞—Ü–∏–π/–¥–µ–Ω—å = 1k/–¥–µ–Ω—å ‚úÖ
- –î–ª—è 1000 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π = 10k/–¥–µ–Ω—å ‚úÖ

---

## –†–µ–∞–ª–∏–∑–∞—Ü–∏—è

**–ü–ª–∞–Ω:** –°–º. [PHASE_2_DATABASE_DETAILED_PLAN.md](../roadmap/PHASE_2_DATABASE_DETAILED_PLAN.md)

**–í—Ä–µ–º—è:** 60-80 —á–∞—Å–æ–≤ (12-16 –¥–Ω–µ–π)

**–û—Å–Ω–æ–≤–Ω—ã–µ –∑–∞–¥–∞—á–∏:**
1. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Supabase (—Ç–∞–±–ª–∏—Ü—ã, RLS, auth)
2. –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –≤ UI (login, signup, logout)
3. –ú–∏–≥—Ä–∞—Ü–∏—è storage.ts ‚Üí storageSupabase.ts
4. –£–¥–∞–ª–µ–Ω–∏–µ —Å—Ç–∞—Ä–æ–π GitHub sync
5. Privacy & Security (Privacy Policy, Delete Account, RLS —Ç–µ—Å—Ç—ã)
6. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
7. **–ú–∏–≥—Ä–∞—Ü–∏—è –ª–æ–≥–∏–∫–∏ –Ω–∞ Edge Functions (20-30 —á–∞—Å–æ–≤)** ‚Üê –ù–û–í–û–ï

---

## –°—Å—ã–ª–∫–∏

- [Supabase Docs](https://supabase.com/docs)
- [Supabase RLS Guide](https://supabase.com/docs/guides/auth/row-level-security)
- [PHASE_2_DATABASE_DETAILED_PLAN.md](../roadmap/PHASE_2_DATABASE_DETAILED_PLAN.md)

---

**–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:** 2025-10-26
