# –¢–µ–∫—É—â–∞—è –∑–∞–¥–∞—á–∞

**–î–∞—Ç–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è:** 2025-10-27
**–§–∞–∑–∞:** 2 - –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è (Supabase)
**–ü—Ä–æ–≥—Ä–µ—Å—Å –§–∞–∑—ã 2:** 33% (3/9 —ç—Ç–∞–ø–æ–≤)

---

## üéØ –¢–µ–∫—É—â–∞—è —Ä–∞–±–æ—Ç–∞

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –≠—Ç–∞–ø—ã 2.0-2.3 –ó–ê–í–ï–†–®–ï–ù–´ (33%), –≠—Ç–∞–ø 2.4 –ì–û–¢–û–í –ö –°–¢–ê–†–¢–£

**–ü–æ—Å–ª–µ–¥–Ω–∏–π –∫–æ–º–º–∏—Ç:** `f1c4b00 feat(phase-2): –∑–∞–≤–µ—Ä—à–∏—Ç—å Stage 2.3 - Auth UI —Å FullScreenModal`
**–î–µ–ø–ª–æ–π:** ‚úÖ –û–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–æ –Ω–∞ https://segigu.github.io/flomoon/

**–ü—Ä–æ–≥—Ä–µ—Å—Å –§–∞–∑—ã 2:**
- ‚úÖ –≠—Ç–∞–ø 2.0: –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ (–æ—Ç–∫–∞—Ç storage.ts, –∫–æ–º–º–∏—Ç –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏)
- ‚úÖ –≠—Ç–∞–ø 2.1: Supabase –ø—Ä–æ–µ–∫—Ç —Å–æ–∑–¥–∞–Ω –∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω
- ‚úÖ –≠—Ç–∞–ø 2.2: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è SDK –∑–∞–≤–µ—Ä—à–µ–Ω–∞
- ‚úÖ –≠—Ç–∞–ø 2.3: Auth UI –∑–∞–≤–µ—Ä—à—ë–Ω (AuthModal.tsx, –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è, logout)

**–°—Ç—Ä–∞—Ç–µ–≥–∏—á–µ—Å–∫–æ–µ —Ä–µ—à–µ–Ω–∏–µ:**
- –ó–∞–¥–∞—á–∏ 1.5-1.8 –§–∞–∑—ã 1 (storage.ts, –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã, —Ç–µ—Å—Ç—ã) **–ü–†–û–ü–£–©–ï–ù–´**
- –§–∞–∑–∞ 1.5 (i18n) **–û–¢–õ–û–ñ–ï–ù–ê** –¥–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –§–∞–∑—ã 2
- –ü–µ—Ä–µ—Ö–æ–¥ —Å—Ä–∞–∑—É –∫ –§–∞–∑–µ 2 (Supabase) –¥–ª—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –∫—Ä–∏—Ç–∏—á–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã

**–ü–æ—á–µ–º—É:**
- Supabase –º–µ–Ω—è–µ—Ç –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É —Ö—Ä–∞–Ω–∏–ª–∏—â–∞ ‚Üí storage.ts –±—É–¥–µ—Ç –∑–∞–º–µ–Ω—ë–Ω –Ω–∞ storageSupabase.ts
- –ù–µ—Ç —Å–º—ã—Å–ª–∞ –¥–≤–∞–∂–¥—ã –¥–µ–ª–∞—Ç—å –æ–¥–Ω—É —Ä–∞–±–æ—Ç—É (localStorage ‚Üí Supabase)
- –ú–Ω–æ–≥–æ—è–∑—ã—á–Ω–æ—Å—Ç—å (i18n) –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –ü–û–°–õ–ï Supabase –±–µ–∑ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤

**–ß—Ç–æ –≥–æ—Ç–æ–≤–æ –≤ –§–∞–∑–µ 1:**
- ‚úÖ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ (–§–∞–∑–∞ 0)
- ‚úÖ **–ó–∞–¥–∞—á–∞ 1.1: userProfile.ts —Å–æ–∑–¥–∞–Ω –∏ –ø—Ä–æ–≤–µ—Ä–µ–Ω**
  - –°–æ–∑–¥–∞–Ω –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å `UserProfile` —Å –ø–æ–ª–Ω–æ–π —Ç–∏–ø–∏–∑–∞—Ü–∏–µ–π
  - –î–æ–±–∞–≤–ª–µ–Ω–∞ –∫–æ–Ω—Å—Ç–∞–Ω—Ç–∞ `USER_PROFILES` —Å –ø—Ä–æ—Ñ–∏–ª–µ–º –ù–∞—Å—Ç–∏
  - –°–æ–∑–¥–∞–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `getCurrentUser()` —Å –ø—Ä–æ–≤–µ—Ä–∫–æ–π –æ—à–∏–±–æ–∫
  - TypeScript –∫–æ–º–ø–∏–ª—è—Ü–∏—è –ø—Ä–æ—à–ª–∞ —É—Å–ø–µ—à–Ω–æ
- ‚úÖ **–ó–∞–¥–∞—á–∞ 1.2: types/index.ts –æ–±–Ω–æ–≤–ª—ë–Ω**
  - –î–æ–±–∞–≤–ª–µ–Ω—ã 5 –Ω–æ–≤—ã—Ö –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤ –¥–ª—è –ø—Å–∏—Ö–æ–ª–æ–≥–∏—á–µ—Å–∫–æ–≥–æ –ø—Ä–æ—Ñ–∏–ª—è
  - –û–±–Ω–æ–≤–ª—ë–Ω –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å `NastiaData` —Å –ø–æ–ª–µ–º `psychologicalProfile`
  - TypeScript –∫–æ–º–ø–∏–ª—è—Ü–∏—è –±–µ–∑ –æ—à–∏–±–æ–∫
- ‚úÖ **–ó–∞–¥–∞—á–∞ 1.3: horoscope.ts —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ –∑–∞–≤–µ—Ä—à—ë–Ω**
  - –ó–∞–º–µ–Ω–µ–Ω—ã —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã –Ω–∞ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏
  - –°–æ–∑–¥–∞–Ω—ã buildUserContext(), buildPartnerContext()
  - –ó–∞–º–µ–Ω–µ–Ω—ã –≤—Å–µ hardcoded —É–ø–æ–º–∏–Ω–∞–Ω–∏—è "–ù–∞—Å—Ç—è" –Ω–∞ getCurrentUser().name
  - TypeScript –∫–æ–º–ø–∏–ª—è—Ü–∏—è –±–µ–∑ –æ—à–∏–±–æ–∫
- ‚úÖ **–ó–∞–¥–∞—á–∞ 1.4: historyStory.ts —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ –∑–∞–≤–µ—Ä—à—ë–Ω**
  - –°–æ–∑–¥–∞–Ω—ã –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏ getUserProfile(), getUserChartAnalysis()
  - –ó–∞–º–µ–Ω–µ–Ω—ã –≤—Å–µ —É–ø–æ–º–∏–Ω–∞–Ω–∏—è "–ù–∞—Å—Ç—è"/"–ù–∞—Å—Ç–∏" –Ω–∞ getCurrentUser().name (8 –º–µ—Å—Ç)
  - TypeScript –∫–æ–º–ø–∏–ª—è—Ü–∏—è –±–µ–∑ –æ—à–∏–±–æ–∫

**–°–ª–µ–¥—É—é—â–∏–π —ç—Ç–∞–ø:** –≠—Ç–∞–ø 2.1 - –°–æ–∑–¥–∞–Ω–∏–µ Supabase –ø—Ä–æ–µ–∫—Ç–∞ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –ë–î —Å—Ö–µ–º—ã

---

## üìù –ü–ª–∞–Ω –§–∞–∑—ã 2: Supabase (9 —ç—Ç–∞–ø–æ–≤, 25-35 —á–∞—Å–æ–≤)

### –≠—Ç–∞–ø 2.0: –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ ‚úÖ –ó–ê–í–ï–†–®–Å–ù (2025-10-27)
- [x] –û—Ç–∫–∞—Ç–∏—Ç—å –Ω–µ–∑–∞–∫–æ–º–º–∏—á–µ–Ω–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è storage.ts
- [x] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å git —Å—Ç–∞—Ç—É—Å (–∑–∞–¥–∞—á–∏ 1.1-1.4 —É–∂–µ –∑–∞–∫–æ–º–º–∏—á–µ–Ω—ã)
- [x] –û–±–Ω–æ–≤–∏—Ç—å CURRENT_TASK.md –∏ MASTER_PLAN.md
- [x] –ö–æ–º–º–∏—Ç: `77216ec docs(phase-2): –æ–±–Ω–æ–≤–∏—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é - –ø–µ—Ä–µ—Ö–æ–¥ –∫ –§–∞–∑–µ 2`

### –≠—Ç–∞–ø 2.1: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Supabase –ø—Ä–æ–µ–∫—Ç–∞ ‚úÖ –ó–ê–í–ï–†–®–Å–ù (2025-10-27)
- [x] –°–æ–∑–¥–∞—Ç—å –∞–∫–∫–∞—É–Ω—Ç –Ω–∞ supabase.com
- [x] –°–æ–∑–¥–∞—Ç—å –ø—Ä–æ–µ–∫—Ç "flomoon-prod" (—Ä–µ–≥–∏–æ–Ω: Europe)
- [x] –°–æ–∑–¥–∞—Ç—å –ë–î —Å—Ö–µ–º—É —á–µ—Ä–µ–∑ SQL Editor (5 —Ç–∞–±–ª–∏—Ü: users, cycles, partners, horoscope_memory, psychological_profiles)
- [x] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å Email Auth –≤ Authentication (confirm email: OFF –¥–ª—è MVP)
- [x] –ó–∞–ø–∏—Å–∞—Ç—å credentials (Project URL, anon key, service_role key)
- [x] –î–æ–±–∞–≤–∏—Ç—å Redirect URLs: localhost:3000, segigu.github.io/flomoon

**Credentials (–≤ password manager):**
- Project URL: https://mbocfgtfkrlclmqjezfv.supabase.co
- anon key: –∑–∞–ø–∏—Å–∞–Ω
- service_role key: –∑–∞–ø–∏—Å–∞–Ω

### –≠—Ç–∞–ø 2.2: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è Supabase SDK ‚úÖ –ó–ê–í–ï–†–®–Å–ù (2025-10-27)
- [x] –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å @supabase/supabase-js
- [x] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å .gitignore (.env.local —É–∂–µ —Ç–∞–º)
- [x] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å MCP Supabase —Å Personal Access Token
- [x] –£–¥–∞–ª–∏—Ç—å —Å—Ç–∞—Ä—É—é –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é —Å SUPABASE_URL/SUPABASE_SERVICE_ROLE_KEY
- [x] –î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—É—é –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é —Å --access-token
- [x] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ MCP Supabase (‚úì Connected)
- [x] –°–æ–∑–¥–∞—Ç—å .env.local —Å credentials (anon key)
- [x] –°–æ–∑–¥–∞—Ç—å /src/lib/supabaseClient.ts
- [x] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ (–≤—Å–µ 5 —Ç–∞–±–ª–∏—Ü –¥–æ—Å—Ç—É–ø–Ω—ã)

**–í–∞–∂–Ω–æ:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω Personal Access Token –≤–º–µ—Å—Ç–æ project credentials –¥–ª—è MCP.

### –≠—Ç–∞–ø 2.3: Auth UI ‚úÖ –ó–ê–í–ï–†–®–Å–ù (2025-10-27)
- [x] –°–æ–∑–¥–∞—Ç—å AuthModal.tsx (Login/Signup/Reset)
- [x] –°–æ–∑–¥–∞—Ç—å AuthModal.module.css (glass morphism —Å—Ç–∏–ª—å)
- [x] –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –≤ ModernNastiaApp.tsx
- [x] –î–æ–±–∞–≤–∏—Ç—å session management (useEffect, onAuthStateChange)
- [x] –î–æ–±–∞–≤–∏—Ç—å –∫–Ω–æ–ø–∫—É Logout –≤ Settings
- [x] TypeScript –∫–æ–º–ø–∏–ª—è—Ü–∏—è –ø—Ä–æ—à–ª–∞ —É—Å–ø–µ—à–Ω–æ

**–ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ:**
- –°–æ–∑–¥–∞–Ω AuthModal –∫–æ–º–ø–æ–Ω–µ–Ω—Ç —Å 3 —Ä–µ–∂–∏–º–∞–º–∏ (Login/Signup/Reset Password)
- Glass morphism —Å—Ç–∏–ª—å (–∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ —Å GlassTabBar)
- –í–∞–ª–∏–¥–∞—Ü–∏—è –ø–æ–ª–µ–π (email —Ñ–æ—Ä–º–∞—Ç, –º–∏–Ω–∏–º—É–º 6 —Å–∏–º–≤–æ–ª–æ–≤ –¥–ª—è –ø–∞—Ä–æ–ª—è)
- Loading –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã, –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
- Session management —á–µ—Ä–µ–∑ Supabase Auth API
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å–µ—Å—Å–∏–∏ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
- –ü–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è auth —Å–æ—Å—Ç–æ—è–Ω–∏—è
- –°–µ–∫—Ü–∏—è "–ê–∫–∫–∞—É–Ω—Ç" –≤ Settings —Å email –∏ –∫–Ω–æ–ø–∫–æ–π Logout

**–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (—Ç—Ä–µ–±—É–µ—Ç—Å—è –≤—Ä—É—á–Ω—É—é):**
1. –ó–∞–ø—É—Å—Ç–∏—Ç—å `npm start`
2. –û—Ç–∫—Ä—ã—Ç—å http://localhost:3000
3. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
4. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –≤—Ö–æ–¥ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
5. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–∞—Ä–æ–ª—è
6. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å Settings ‚Üí –ê–∫–∫–∞—É–Ω—Ç ‚Üí –í—ã–π—Ç–∏

**–°–ª–µ–¥—É—é—â–∏–π —à–∞–≥:** –≠—Ç–∞–ø 2.4 - Edge Functions (~8-10 —á–∞—Å–æ–≤)

### –≠—Ç–∞–ø 2.4: Edge Functions (~8-10 —á–∞—Å–æ–≤)
- [ ] –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å Supabase CLI
- [ ] –°–æ–∑–¥–∞—Ç—å calculate-cycle Edge Function
- [ ] –°–æ–∑–¥–∞—Ç—å generate-ai-content Edge Function
- [ ] –î–æ–±–∞–≤–∏—Ç—å rate limiting (10 –∑–∞–ø—Ä–æ—Å–æ–≤/—á–∞—Å)
- [ ] –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å secrets (CLAUDE_API_KEY, OPENAI_API_KEY)
- [ ] –î–µ–ø–ª–æ–π functions

### –≠—Ç–∞–ø 2.5: API —Å–ª–æ–π (~3-4 —á–∞—Å–∞)
- [ ] –°–æ–∑–¥–∞—Ç—å /src/utils/api.ts
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å fetchCycleStats()
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å generateAIContent()
- [ ] –û–±–Ω–æ–≤–∏—Ç—å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è API

### –≠—Ç–∞–ø 2.6: –£–¥–∞–ª–µ–Ω–∏–µ —Å—Ç–∞—Ä–æ–≥–æ –∫–æ–¥–∞ (~1-2 —á–∞—Å–∞)
- [ ] –£–¥–∞–ª–∏—Ç—å cloudSync.ts (GitHub sync)
- [ ] –£–¥–∞–ª–∏—Ç—å –≤—ã–∑–æ–≤—ã cloudSync –∏–∑ ModernNastiaApp.tsx
- [ ] –ó–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å cycleUtils.ts –∏ aiClient.ts (–¥–ª—è reference)

### –≠—Ç–∞–ø 2.7: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (~2-3 —á–∞—Å–∞)
- [ ] –°–æ–∑–¥–∞—Ç—å 2+ —Ç–µ—Å—Ç–æ–≤—ã—Ö –∞–∫–∫–∞—É–Ω—Ç–∞
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å RLS (user A –Ω–µ –≤–∏–¥–∏—Ç –¥–∞–Ω–Ω—ã–µ user B)
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å AI –≥–µ–Ω–µ—Ä–∞—Ü–∏—é —á–µ—Ä–µ–∑ Edge Functions
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å rate limiting
- [ ] –ó–∞–ø—É—Å—Ç–∏—Ç—å npm test

### –≠—Ç–∞–ø 2.8: –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è (~1-2 —á–∞—Å–∞)
- [ ] –û–±–Ω–æ–≤–∏—Ç—å CLAUDE.md (–Ω–æ–≤–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ Supabase)
- [ ] –°–æ–∑–¥–∞—Ç—å SUPABASE_SETUP.md
- [ ] –û–±–Ω–æ–≤–∏—Ç—å CHANGELOG.md

### –≠—Ç–∞–ø 2.9: –§–∏–Ω–∞–ª—å–Ω—ã–π –∫–æ–º–º–∏—Ç (~30 –º–∏–Ω)
- [ ] –ó–∞–ø—É—Å—Ç–∏—Ç—å /code-review
- [ ] –°–æ–∑–¥–∞—Ç—å –∫–æ–º–º–∏—Ç
- [ ] –î–µ–ø–ª–æ–π –Ω–∞ GitHub Pages

**–î–µ—Ç–∞–ª—å–Ω—ã–π –ø–ª–∞–Ω:** –°–º. –≤—ã—à–µ –≤ —Ä–∞–∑–¥–µ–ª–µ "–ü–ª–∞–Ω —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏"

---

## üìä –û—Ü–µ–Ω–∫–∞ –≤—Ä–µ–º–µ–Ω–∏

**–û–±—â–µ–µ –≤—Ä–µ–º—è:** 25-35 —á–∞—Å–æ–≤ —á–∏—Å—Ç–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏ ‚Üí 4-6 —Ä–∞–±–æ—á–∏—Ö –¥–Ω–µ–π

**–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞:** –¢–æ–Ω–∫–∏–π –∫–ª–∏–µ–Ω—Ç (UI) + —Ç–æ–ª—Å—Ç—ã–π —Å–µ—Ä–≤–µ—Ä (Edge Functions)

**–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –º–æ–º–µ–Ω—Ç—ã:**
- API –∫–ª—é—á–∏ Claude/OpenAI —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ Supabase Secrets (–Ω–µ –≤ .env –∫–ª–∏–µ–Ω—Ç–∞)
- RLS policies –¥–ª—è –∏–∑–æ–ª—è—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö –º–µ–∂–¥—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏
- –ù–µ—Ç –º–∏–≥—Ä–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö (—á–∏—Å—Ç–∞—è –±–∞–∑–∞ —Å –Ω—É–ª—è)

---

## ‚ö†Ô∏è –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ —Ä–∏—Å–∫–∏ –§–∞–∑—ã 2

### –í—ã—Å–æ–∫–∏–π —Ä–∏—Å–∫
1. **Service Role Key —É—Ç–µ—á—ë—Ç –≤ GitHub**
   - –í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å: 25%
   - –í–ª–∏—è–Ω–∏–µ: –ö—Ä–∏—Ç–∏—á–Ω–æ–µ (–ø–æ–ª–Ω—ã–π –¥–æ—Å—Ç—É–ø –∫ –ë–î)
   - –ú–∏—Ç–∏–≥–∞—Ü–∏—è: –ù–ò–ö–û–ì–î–ê –Ω–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ, –¥–æ–±–∞–≤–∏—Ç—å .env.local –≤ .gitignore –î–û —Å–æ–∑–¥–∞–Ω–∏—è
   - Plan B: –ù–µ–º–µ–¥–ª–µ–Ω–Ω–æ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –Ω–æ–≤—ã–π –∫–ª—é—á

2. **RLS policies –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ (—É—Ç–µ—á–∫–∞ –¥–∞–Ω–Ω—ã—Ö)**
   - –í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å: 30%
   - –í–ª–∏—è–Ω–∏–µ: –ö—Ä–∏—Ç–∏—á–Ω–æ–µ (user A –≤–∏–¥–∏—Ç –¥–∞–Ω–Ω—ã–µ user B)
   - –ú–∏—Ç–∏–≥–∞—Ü–∏—è: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Å 2+ –∞–∫–∫–∞—É–Ω—Ç–∞–º–∏ –Ω–∞ —ç—Ç–∞–ø–µ 2.7
   - Plan B: –ù–µ–º–µ–¥–ª–µ–Ω–Ω–æ –∏—Å–ø—Ä–∞–≤–∏—Ç—å policies

### –°—Ä–µ–¥–Ω–∏–π —Ä–∏—Å–∫
3. **Edge Functions —Ö–æ–ª–æ–¥–Ω—ã–π —Å—Ç–∞—Ä—Ç (~1-2 —Å–µ–∫)**
   - –í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å: 100% (Free tier)
   - –í–ª–∏—è–Ω–∏–µ: –°—Ä–µ–¥–Ω–µ–µ (UX —Å—Ç—Ä–∞–¥–∞–µ—Ç)
   - –ú–∏—Ç–∏–≥–∞—Ü–∏—è: –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ, loading –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã

4. **Rate limiting —Å–ª–∏—à–∫–æ–º —Å—Ç—Ä–æ–≥–∏–π (10 –∑–∞–ø—Ä–æ—Å–æ–≤/—á–∞—Å)**
   - –í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å: 40%
   - –í–ª–∏—è–Ω–∏–µ: –°—Ä–µ–¥–Ω–µ–µ (–∂–∞–ª–æ–±—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π)
   - –ú–∏—Ç–∏–≥–∞—Ü–∏—è: –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ª–æ–≥–æ–≤, —É–≤–µ–ª–∏—á–∏—Ç—å –¥–æ 20/—á–∞—Å –µ—Å–ª–∏ –Ω—É–∂–Ω–æ

---

## üîó –°–≤—è–∑–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

- [MASTER_PLAN.md](../MASTER_PLAN.md) - –æ–±—â–∏–π –ø–ª–∞–Ω –ø—Ä–æ–µ–∫—Ç–∞ (–æ–±–Ω–æ–≤–ª—ë–Ω: –§–∞–∑–∞ 1.5 –ø–æ—Å–ª–µ –§–∞–∑—ã 2)
- [PHASE_2_DATABASE_DETAILED_PLAN.md](../roadmap/PHASE_2_DATABASE_DETAILED_PLAN.md) - –¥–µ—Ç–∞–ª—å–Ω—ã–π –ø–ª–∞–Ω Supabase
- [ADR-001: Universal User Profile](../architecture/ADR-001-universal-user-profile.md)
- [ADR-004: Database Choice](../architecture/ADR-004-database-choice.md) - –ø–æ—á–µ–º—É Supabase

---

## üöß –ë–ª–æ–∫–µ—Ä—ã

–ù–µ—Ç –∞–∫—Ç–∏–≤–Ω—ã—Ö –±–ª–æ–∫–µ—Ä–æ–≤.

**–ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ —Å—Ç–∞—Ä—Ç—É:**
- ‚úÖ –ó–∞–¥–∞—á–∏ 1.1-1.4 –∑–∞–≤–µ—Ä—à–µ–Ω—ã
- ‚úÖ storage.ts –æ—Ç–∫–∞—Ç–∏–ª—Å—è
- ‚úÖ Git —á–∏—Å—Ç—ã–π
- ‚úÖ –ü–ª–∞–Ω —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω (–§–∞–∑–∞ 2 ‚Üí –§–∞–∑–∞ 1.5)

---

## üí° –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –¥–ª—è –§–∞–∑—ã 2

1. **–ù–∞—á–∏–Ω–∞—Ç—å —Å Supabase dashboard** - —Å–æ–∑–¥–∞—Ç—å –ø—Ä–æ–µ–∫—Ç –∏ –ë–î –¥–æ –∫–æ–¥–∞
2. **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å RLS –≤—Ä—É—á–Ω—É—é** - —Å–æ–∑–¥–∞—Ç—å 2+ —Ç–µ—Å—Ç–æ–≤—ã—Ö –∞–∫–∫–∞—É–Ω—Ç–∞
3. **–ù–ï –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Service Role Key –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ** - –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –æ—à–∏–±–∫–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
4. **–ö–æ–º–º–∏—Ç–∏—Ç—å –ø–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ —ç—Ç–∞–ø–∞** - –∞—Ç–æ–º–∞—Ä–Ω—ã–µ –∫–æ–º–º–∏—Ç—ã
5. **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å Edge Functions –ª–æ–∫–∞–ª—å–Ω–æ** - `supabase functions serve` –î–û –¥–µ–ø–ª–æ—è
6. **Backup .env.local** - —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å credentials –≤ password manager
7. **–ú–æ–Ω–∏—Ç–æ—Ä–∏—Ç—å —Å—Ç–æ–∏–º–æ—Å—Ç—å** - Supabase Dashboard ‚Üí Usage
8. **–î–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å –≤—Å—ë** - —á–µ—Ä–µ–∑ –º–µ—Å—è—Ü –∑–∞–±—É–¥–µ—à—å –∫–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

---

**–û–±–Ω–æ–≤–ª–µ–Ω–æ:** 2025-10-27
