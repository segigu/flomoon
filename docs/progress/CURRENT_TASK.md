# –¢–µ–∫—É—â–∞—è –∑–∞–¥–∞—á–∞

**–î–∞—Ç–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è:** 2025-10-27
**–§–∞–∑–∞:** 3 - AI Edge Functions (Production Security) üîÑ **–í –†–ê–ë–û–¢–ï**
**–ü—Ä–æ–≥—Ä–µ—Å—Å –§–∞–∑—ã 3:** 50% (Part 1/2 –∑–∞–≤–µ—Ä—à–µ–Ω–∞)

---

## üéØ –¢–µ–∫—É—â–∞—è —Ä–∞–±–æ—Ç–∞

**–°—Ç–∞—Ç—É—Å:** üîÑ **Part 1 –ó–ê–í–ï–†–®–ï–ù–ê** - Direct API keys –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã –¥–ª—è local dev

**–ü–æ—Å–ª–µ–¥–Ω–∏–µ –∫–æ–º–º–∏—Ç—ã:**
- `ab70d3d fix(env): –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –ø—Ä—è–º—ã–µ API –∫–ª—é—á–∏ –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏`

**–¢–µ–∫—É—â–∞—è –∑–∞–¥–∞—á–∞:** –î–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ Part 1, –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∫ Part 2

**–ü—Ä–æ–≥—Ä–µ—Å—Å Phase 3:**
- ‚úÖ Part 1: Direct API keys –¥–ª—è local dev (completed)
- ‚è≥ Part 2: Supabase Edge Functions –¥–ª—è production (pending)

---

## üìã –ö–æ–Ω—Ç–µ–∫—Å—Ç: –ü—Ä–æ–±–ª–µ–º–∞ –∏ —Ä–µ—à–µ–Ω–∏–µ

### –ü—Ä–æ–±–ª–µ–º–∞ (–æ–±–Ω–∞—Ä—É–∂–µ–Ω–∞ –ø–æ—Å–ª–µ Stage 2.7)
–ü–æ—Å–ª–µ —É–¥–∞–ª–µ–Ω–∏—è `remoteConfig.ts` –≤ Stage 2.7 (–∫–æ—Ç–æ—Ä—ã–π –∑–∞–≥—Ä—É–∂–∞–ª AI –∫–ª—é—á–∏ –∏–∑ GitHub), Claude API –ø–µ—Ä–µ—Å—Ç–∞–ª —Ä–∞–±–æ—Ç–∞—Ç—å:
```
‚ùå Claude API failed, falling back to OpenAI: Error: Claude API key not available
```

**–ü–æ—á–µ–º—É —ç—Ç–æ –ø—Ä–æ–∏–∑–æ—à–ª–æ:**
- –í Stage 2.7 —É–¥–∞–ª–∏–ª–∏ GitHub sync (–≤–∫–ª—é—á–∞—è `remoteConfig.ts`)
- `remoteConfig.ts` –∑–∞–≥—Ä—É–∂–∞–ª –∫–ª—é—á–∏ Claude –∏ OpenAI –∏–∑ GitHub repo `nastia-data`
- –ü–æ—Å–ª–µ —É–¥–∞–ª–µ–Ω–∏—è –∫–ª—é—á–∏ –ø–µ—Ä–µ—Å—Ç–∞–ª–∏ –∑–∞–≥—Ä—É–∂–∞—Ç—å—Å—è
- OpenAI –ø—Ä–æ–¥–æ–ª–∂–∞–ª —Ä–∞–±–æ—Ç–∞—Ç—å —á–µ—Ä–µ–∑ Cloudflare Workers proxy (—É –∫–æ—Ç–æ—Ä–æ–≥–æ –∫–ª—é—á embedded)

### –†–µ—à–µ–Ω–∏–µ: –ì–∏–±—Ä–∏–¥–Ω—ã–π –ø–æ–¥—Ö–æ–¥ (2 —á–∞—Å—Ç–∏)

#### ‚úÖ Part 1: Direct API keys (LOCAL DEV) - –ó–ê–í–ï–†–®–ï–ù–ê
**–¶–µ–ª—å:** –ë—ã—Å—Ç—Ä—ã–π fix –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

**–ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ:**
1. –î–æ–±–∞–≤–ª–µ–Ω—ã —Ä–µ–∞–ª—å–Ω—ã–µ API –∫–ª—é—á–∏ –≤ `.env.local`:
   ```bash
   REACT_APP_CLAUDE_API_KEY=sk-ant-api03-XwZo...
   REACT_APP_OPENAI_API_KEY=sk-proj-ZyhJ...
   ```
2. –û–±–Ω–æ–≤–ª—ë–Ω `.env` (—É–¥–∞–ª–µ–Ω—ã Cloudflare Workers proxy URLs)
3. –û–±–Ω–æ–≤–ª—ë–Ω `.env.example` (–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è + Phase 3 reference)
4. –ü–µ—Ä–µ–∑–∞–ø—É—â–µ–Ω dev server - –∫–æ–º–ø–∏–ª—è—Ü–∏—è —É—Å–ø–µ—à–Ω–∞
5. –ö–æ–º–º–∏—Ç: `ab70d3d`

**–ü—Ä–æ–±–ª–µ–º—ã —ç—Ç–æ–≥–æ –ø–æ–¥—Ö–æ–¥–∞:**
- ‚ùå –ö–ª—é—á–∏ –≤–∏–¥–Ω—ã –≤ client bundle (–Ω–µ–±–µ–∑–æ–ø–∞—Å–Ω–æ –¥–ª—è production)
- ‚ùå –ù–µ—Ç rate limiting
- ‚ùå –ù–µ—Ç –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
- ‚ùå –ù–µ—Ç —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–≥–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è

#### ‚è≥ Part 2: Supabase Edge Functions (PRODUCTION) - –û–ñ–ò–î–ê–ï–¢
**–¶–µ–ª—å:** Production-ready —Ä–µ—à–µ–Ω–∏–µ —Å –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å—é

**–ß—Ç–æ –±—É–¥–µ—Ç —Å–¥–µ–ª–∞–Ω–æ:**
1. –°–æ–∑–¥–∞—Ç—å Edge Function `ai-chat` (Deno TypeScript)
2. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å Supabase Secrets (CLAUDE_API_KEY, OPENAI_API_KEY)
3. Deploy Edge Function –Ω–∞ Supabase
4. –û–±–Ω–æ–≤–∏—Ç—å `aiClient.ts` –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –≥–∏–±—Ä–∏–¥–Ω–æ–≥–æ —Ä–µ–∂–∏–º–∞:
   ```typescript
   if (USE_EDGE_FUNCTIONS) {
     // Production: call Supabase Edge Function
     await supabase.functions.invoke('ai-chat', { body: { messages } });
   } else {
     // Local dev: direct API
     await fetch('https://api.anthropic.com/v1/messages', ...);
   }
   ```
5. –î–æ–±–∞–≤–∏—Ç—å ENV –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é `REACT_APP_USE_EDGE_FUNCTIONS`
6. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ Edge Functions:**
- ‚úÖ –ö–ª—é—á–∏ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ (–Ω–µ –≤–∏–¥–Ω—ã –∫–ª–∏–µ–Ω—Ç—É)
- ‚úÖ RLS integration (JWT —Ç–æ–∫–µ–Ω –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)
- ‚úÖ Rate limiting –≤–æ–∑–º–æ–∂–µ–Ω
- ‚úÖ –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –≤—ã–∑–æ–≤–æ–≤
- ‚úÖ –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–ª—é—á–∞–º–∏

---

## üìù –ü–ª–∞–Ω Phase 3: AI Edge Functions (2 —á–∞—Å—Ç–∏, 3-4 —á–∞—Å–∞)

### ‚úÖ Part 1: Direct API keys (LOCAL DEV) - –ó–ê–í–ï–†–®–ï–ù–ê (1 —á–∞—Å)
**ETA:** 30 –º–∏–Ω—É—Ç ‚Üí **–§–∞–∫—Ç–∏—á–µ—Å–∫–∏:** 1 —á–∞—Å

**–ó–∞–¥–∞—á–∏:**
- [x] –û–±–Ω–æ–≤–∏—Ç—å `.env.local` —Å Claude –∏ OpenAI –∫–ª—é—á–∞–º–∏
- [x] –û—á–∏—Å—Ç–∏—Ç—å `.env` –æ—Ç Cloudflare Workers mentions
- [x] –û–±–Ω–æ–≤–∏—Ç—å `.env.example` (remove Cloudflare Workers)
- [x] –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å dev server –∏ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–º–ø–∏–ª—è—Ü–∏—é
- [x] –ö–æ–º–º–∏—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–π (`ab70d3d`)
- [x] –°–æ–∑–¥–∞—Ç—å `PHASE_3_AI_EDGE_FUNCTIONS.md` (–ø–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è)
- [x] –û–±–Ω–æ–≤–∏—Ç—å `MASTER_PLAN.md` (–¥–æ–±–∞–≤–∏—Ç—å Phase 3, renumber old phases)
- [x] –û–±–Ω–æ–≤–∏—Ç—å `CURRENT_TASK.md` (—ç—Ç–æ—Ç —Ñ–∞–π–ª)
- [ ] –§–∏–Ω–∞–ª—å–Ω—ã–π –∫–æ–º–º–∏—Ç –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏

**–ö—Ä–∏—Ç–µ—Ä–∏–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è Part 1:**
- ‚úÖ `.env.local` —Å–æ–¥–µ—Ä–∂–∏—Ç –æ–±–∞ –∫–ª—é—á–∞ (Claude, OpenAI)
- ‚úÖ `.env` –±–µ–∑–æ–ø–∞—Å–µ–Ω –¥–ª—è –∫–æ–º–º–∏—Ç–∞ (no secrets)
- ‚úÖ `.env.example` –¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä—É–µ—Ç Phase 3 approach
- ‚úÖ Dev server –∫–æ–º–ø–∏–ª–∏—Ä—É–µ—Ç—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫
- ‚úÖ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è —Å–æ–∑–¥–∞–Ω–∞ (PHASE_3_AI_EDGE_FUNCTIONS.md)
- ‚è≥ –§–∏–Ω–∞–ª—å–Ω—ã–π –∫–æ–º–º–∏—Ç

### ‚è≥ Part 2: Supabase Edge Functions (PRODUCTION) - –û–ñ–ò–î–ê–ï–¢ (2-3 —á–∞—Å–∞)
**ETA:** 2-3 —á–∞—Å–∞

**–ó–∞–¥–∞—á–∏:**
- [ ] **–≠—Ç–∞–ø 3.1:** –°–æ–∑–¥–∞–Ω–∏–µ Edge Function (~30 –º–∏–Ω)
  - [ ] `supabase functions new ai-chat`
  - [ ] –ù–∞–ø–∏—Å–∞—Ç—å –∫–æ–¥ —Ñ—É–Ω–∫—Ü–∏–∏ (Claude + OpenAI fallback)
  - [ ] –û–±—Ä–∞–±–æ—Ç–∫–∞ JWT —Ç–æ–∫–µ–Ω–∞ –¥–ª—è RLS
- [ ] **–≠—Ç–∞–ø 3.2:** –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Secrets (~10 –º–∏–Ω)
  - [ ] `supabase secrets set CLAUDE_API_KEY="..."`
  - [ ] `supabase secrets set OPENAI_API_KEY="..."`
- [ ] **–≠—Ç–∞–ø 3.3:** Deploy (~10 –º–∏–Ω)
  - [ ] `supabase link --project-ref mbocfgtfkrlclmqjezfv`
  - [ ] `supabase functions deploy ai-chat`
- [ ] **–≠—Ç–∞–ø 3.4:** –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–ª–∏–µ–Ω—Ç–∞ (~1 —á–∞—Å)
  - [ ] –û–±–Ω–æ–≤–∏—Ç—å `aiClient.ts` (–≥–∏–±—Ä–∏–¥–Ω—ã–π —Ä–µ–∂–∏–º)
  - [ ] –î–æ–±–∞–≤–∏—Ç—å `REACT_APP_USE_EDGE_FUNCTIONS` –≤ .env
  - [ ] –û–±–Ω–æ–≤–∏—Ç—å package.json scripts (build:prod)
- [ ] **–≠—Ç–∞–ø 3.5:** Rate Limiting (optional, ~30 –º–∏–Ω)
  - [ ] –°–æ–∑–¥–∞—Ç—å —Ç–∞–±–ª–∏—Ü—É `ai_requests`
  - [ ] –î–æ–±–∞–≤–∏—Ç—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ Edge Function
  - [ ] –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É –ª–∏–º–∏—Ç–∞ (100 req/day)
- [ ] **–≠—Ç–∞–ø 3.6:** –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (~30 –º–∏–Ω)
  - [ ] Local dev (USE_EDGE_FUNCTIONS=false)
  - [ ] Production simulation (USE_EDGE_FUNCTIONS=true)
  - [ ] curl test Edge Function –Ω–∞–ø—Ä—è–º—É—é
  - [ ] Fallback –Ω–∞ OpenAI
- [ ] **–≠—Ç–∞–ø 3.7:** –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è (~20 –º–∏–Ω)
  - [ ] –û–±–Ω–æ–≤–∏—Ç—å CLAUDE.md (AI Integration section)
  - [ ] –û–±–Ω–æ–≤–∏—Ç—å .env.example
  - [ ] –°–æ–∑–¥–∞—Ç—å deployment –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—é

**–ö—Ä–∏—Ç–µ—Ä–∏–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è Part 2:**
- Edge Function `ai-chat` –∑–∞–¥–µ–ø–ª–æ–µ–Ω–∞ –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç
- Secrets –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã –≤ Supabase
- `aiClient.ts` –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –æ–±–∞ —Ä–µ–∂–∏–º–∞ (local/production)
- –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —É—Å–ø–µ—à–Ω–æ (–æ–±–∞ —Ä–µ–∂–∏–º–∞ —Ä–∞–±–æ—Ç–∞—é—Ç)
- API –∫–ª—é—á–∏ –ù–ï –≤–∏–¥–Ω—ã –≤ client bundle (production build)

---

## üéâ –ó–∞–≤–µ—Ä—à—ë–Ω–Ω—ã–µ —Ñ–∞–∑—ã

### ‚úÖ –§–∞–∑–∞ 2: –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è (100% - 8/8 —ç—Ç–∞–ø–æ–≤)
**–ó–∞–≤–µ—Ä—à–µ–Ω–æ:** 2025-10-27
**–ü–æ—Å–ª–µ–¥–Ω–∏–π –∫–æ–º–º–∏—Ç:** `98c5822 fix(phase-2): –∑–∞–º–µ–Ω–∏—Ç—å exportData/importData –Ω–∞ JSON.stringify/parse`

**–ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ:**
- ‚úÖ Supabase –ø—Ä–æ–µ–∫—Ç —Å–æ–∑–¥–∞–Ω (flomoon-prod, Europe)
- ‚úÖ –ë–î —Å—Ö–µ–º–∞: 5 —Ç–∞–±–ª–∏—Ü (users, cycles, partners, horoscope_memory, psychological_profiles)
- ‚úÖ RLS policies (user A –Ω–µ –≤–∏–¥–∏—Ç –¥–∞–Ω–Ω—ã–µ user B)
- ‚úÖ Auth UI (AuthModal.tsx - login/signup/logout)
- ‚úÖ Profile Setup UI (ProfileSetupModal.tsx)
- ‚úÖ Settings –¥–ª—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –ø—Ä–æ—Ñ–∏–ª—è
- ‚úÖ Cycles API + –º–∏–≥—Ä–∞—Ü–∏—è –Ω–∞ Supabase
- ‚úÖ –£–¥–∞–ª–µ–Ω–∏–µ localStorage cloudSync (-6505 —Å—Ç—Ä–æ–∫!)
- ‚úÖ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ 2 —Ç–µ—Å—Ç–æ–≤—ã—Ö –∞–∫–∫–∞—É–Ω—Ç–∞—Ö
- ‚úÖ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∞ (CLAUDE.md, CHANGELOG.md)
- ‚úÖ Deploy: https://segigu.github.io/flomoon/

### ‚úÖ –§–∞–∑–∞ 1: –£–Ω–∏–≤–µ—Ä—Å–∞–ª–∏–∑–∞—Ü–∏—è (44% - 4/9 –∑–∞–¥–∞—á)
**–°—Ç–∞—Ç—É—Å:** –ß–ê–°–¢–ò–ß–ù–û –ó–ê–í–ï–†–®–ï–ù–ê (–∑–∞–¥–∞—á–∏ 1.5-1.8 –ü–†–û–ü–£–©–ï–ù–´)

**–ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ:**
- ‚úÖ userProfile.ts —Å–æ–∑–¥–∞–Ω (—É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞)
- ‚úÖ types/index.ts –æ–±–Ω–æ–≤–ª—ë–Ω (–ø—Å–∏—Ö–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π –ø—Ä–æ—Ñ–∏–ª—å –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã)
- ‚úÖ horoscope.ts —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ (hardcoded "–ù–∞—Å—Ç—è" ‚Üí `getCurrentUser()`)
- ‚úÖ historyStory.ts —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ (hardcoded "–ù–∞—Å—Ç—è" ‚Üí `getCurrentUser()`)

**–ü—Ä–æ–ø—É—â–µ–Ω–æ (—Å—Ç—Ä–∞—Ç–µ–≥–∏—á–µ—Å–∫–æ–µ —Ä–µ—à–µ–Ω–∏–µ):**
- ‚ùå storage.ts –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ (Supabase –∑–∞–º–µ–Ω—è–µ—Ç localStorage)
- ‚ùå –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ
- ‚ùå –¢–µ—Å—Ç—ã
- ‚ùå –í–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ (–ø–µ—Ä–µ–Ω–µ—Å–µ–Ω–æ –≤ Phase 6)

### ‚úÖ –§–∞–∑–∞ 0: –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ (100% - 3/3 –∑–∞–¥–∞—á)
**–ó–∞–≤–µ—Ä—à–µ–Ω–æ:** 2025-10-26

---

## üìä –û—Ü–µ–Ω–∫–∞ –≤—Ä–µ–º–µ–Ω–∏ Phase 3

**Part 1:** 30 –º–∏–Ω ‚Üí **–§–∞–∫—Ç–∏—á–µ—Å–∫–∏:** 1 —á–∞—Å ‚úÖ
**Part 2:** 2-3 —á–∞—Å–∞ ‚Üí **ETA:** ~2-3 —á–∞—Å–∞ ‚è≥

**–û–±—â–µ–µ –≤—Ä–µ–º—è Phase 3:** 3-4 —á–∞—Å–∞
**–ü—Ä–æ–≥—Ä–µ—Å—Å:** 50% (Part 1/2 –∑–∞–≤–µ—Ä—à–µ–Ω–∞)

---

## üîó –°–≤—è–∑–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

- [MASTER_PLAN.md](../MASTER_PLAN.md) - –æ–±—â–∏–π –ø–ª–∞–Ω –ø—Ä–æ–µ–∫—Ç–∞ (–æ–±–Ω–æ–≤–ª—ë–Ω: Phase 3 –¥–æ–±–∞–≤–ª–µ–Ω–∞)
- [PHASE_3_AI_EDGE_FUNCTIONS.md](../roadmap/PHASE_3_AI_EDGE_FUNCTIONS.md) - –¥–µ—Ç–∞–ª—å–Ω—ã–π –ø–ª–∞–Ω Phase 3
- [CHANGELOG.md](./CHANGELOG.md) - –∏—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π
- `.env.local` - —Å–æ–¥–µ—Ä–∂–∏—Ç —Ä–µ–∞–ª—å–Ω—ã–µ API –∫–ª—é—á–∏ (NOT committed)
- `.env` - safe config (committed)
- `.env.example` - template –¥–ª—è –Ω–æ–≤—ã—Ö —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤

---

## üöß –ë–ª–æ–∫–µ—Ä—ã

–ù–µ—Ç –∞–∫—Ç–∏–≤–Ω—ã—Ö –±–ª–æ–∫–µ—Ä–æ–≤.

**–ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ Part 2:**
- ‚úÖ Part 1 –∑–∞–≤–µ—Ä—à–µ–Ω–∞
- ‚úÖ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è —Å–æ–∑–¥–∞–Ω–∞
- ‚úÖ Supabase –ø—Ä–æ–µ–∫—Ç —É–∂–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω (Phase 2)
- ‚úÖ Supabase CLI —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω (Phase 2)
- ‚úÖ Personal Access Token –¥–ª—è MCP –µ—Å—Ç—å

---

## üí° –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. **–ó–∞–∫–æ–º–º–∏—Ç–∏—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é:**
   ```bash
   git add docs/roadmap/PHASE_3_AI_EDGE_FUNCTIONS.md docs/MASTER_PLAN.md docs/progress/CURRENT_TASK.md
   git commit -m "docs(phase-3): Part 1 –∑–∞–≤–µ—Ä—à–µ–Ω–∞ - direct API keys –¥–ª—è local dev"
   ```

2. **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ Part 1 (–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å):**
   - –û—Ç–∫—Ä—ã—Ç—å http://localhost:3000
   - –°–æ–∑–¥–∞—Ç—å –≥–æ—Ä–æ—Å–∫–æ–ø
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å console: –ù–ï –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å "Claude API failed, falling back to OpenAI"

3. **–ù–∞—á–∞—Ç—å Part 2 (–∫–æ–≥–¥–∞ –≥–æ—Ç–æ–≤):**
   - –°–ª–µ–¥–æ–≤–∞—Ç—å —ç—Ç–∞–ø–∞–º 3.1-3.7 –∏–∑ PHASE_3_AI_EDGE_FUNCTIONS.md
   - –°–æ–∑–¥–∞—Ç—å Edge Function
   - Deploy –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

---

## ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—Ç–∫–∏

1. **`.env.local` –ù–ï –∫–æ–º–º–∏—Ç–∏—Ç—Å—è** - —Å–æ–¥–µ—Ä–∂–∏—Ç —Ä–µ–∞–ª—å–Ω—ã–µ –∫–ª—é—á–∏, –≤ .gitignore
2. **Cloudflare Workers proxy —É–¥–∞–ª—ë–Ω** - –±–æ–ª—å—à–µ –Ω–µ –Ω—É–∂–µ–Ω, –∏—Å–ø–æ–ª—å–∑—É–µ–º direct API
3. **Part 2 –∫—Ä–∏—Ç–∏—á–Ω–∞ –¥–ª—è production** - direct API keys –Ω–µ–±–µ–∑–æ–ø–∞—Å–Ω—ã –¥–ª—è deployment
4. **–ì–∏–±—Ä–∏–¥–Ω—ã–π —Ä–µ–∂–∏–º** - –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å `REACT_APP_USE_EDGE_FUNCTIONS` (false = local, true = production)

---

**–û–±–Ω–æ–≤–ª–µ–Ω–æ:** 2025-10-27
