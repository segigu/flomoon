#!/usr/bin/env node

// –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –°–¢–ê–†–û–ì–û –∏ –ù–û–í–û–ì–û –ø–æ–¥—Ö–æ–¥–æ–≤ –∫ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

const comparisons = [
  {
    type: 'morning_brief (–≥–æ—Ä–æ—Å–∫–æ–ø –ø—Ä–æ –ú–∞—Ä—Å –∏ —Ö–∞–æ—Å)',
    old: {
      title: '–õ—É–Ω–∞ –≤ –±–æ–µ–≤–æ–º —Ä–µ–∂–∏–º–µ',
      body: '–ù–∞—Å—Ç—è, —Å–µ–≥–æ–¥–Ω—è —Ç—ã ‚Äî –±–æ–µ–≤–∞—è –º–∞—à–∏–Ω–∞ üî• –ì–æ—Ä–æ—Å–∫–æ–ø –Ω–∞ –¥–µ–Ω—å –æ–±–µ—â–∞–µ—Ç: —Å–Ω–∞—á–∞–ª–∞ –±–µ—à–µ–Ω—Å—Ç–≤...',
      titleLen: 21,
      bodyLen: 85, // –æ–±—Ä–µ–∑–∞–µ—Ç—Å—è!
      problems: ['Body –æ–±—Ä–µ–∑–∞–µ—Ç—Å—è!', '–î–ª–∏–Ω–Ω–∞—è —Ñ—Ä–∞–∑–∞ "–ì–æ—Ä–æ—Å–∫–æ–ø –Ω–∞ –¥–µ–Ω—å –æ–±–µ—â–∞–µ—Ç"', '–ù–µ —É–ª–æ–∂–∏–ª—Å—è –≤ UI']
    },
    new: {
      title: '–ú–∞—Ä—Å–∏–∞–Ω—Å–∫–∏–π —Ö–∞–æ—Å',
      body: '–ù–∞—Å—Ç—è, –ú–∞—Ä—Å vs –°–∞—Ç—É—Ä–Ω ‚Äî –¥–µ—Ä–∂–∏—Å—å –∫—Ä–µ–ø—á–µ! üî•',
      titleLen: 16,
      bodyLen: 42,
      improvements: ['–ü–æ–º–µ—â–∞–µ—Ç—Å—è –≤ UI', '–ö–æ–Ω–∫—Ä–µ—Ç–∏–∫–∞ –∏–∑ –≥–æ—Ä–æ—Å–∫–æ–ø–∞', '–£–±—Ä–∞–Ω—ã –¥–ª–∏–Ω–Ω—ã–µ –≤–≤–æ–¥–Ω—ã–µ']
    }
  },
  {
    type: 'morning_brief (–≥–æ—Ä–æ—Å–∫–æ–ø –ø—Ä–æ –í–µ–Ω–µ—Ä—É –∏ –æ—Ç–¥—ã—Ö)',
    old: {
      title: '–ù–∞—Å—Ç—é—à, —à—Çorm –∏–¥—ë—Ç',
      body: '–ù–∞—Å—Ç—è, —Å–µ–≥–æ–¥–Ω—è—à–Ω–∏–π –≥–æ—Ä–æ—Å–∫–æ–ø —Å—É–ª–∏—Ç –∫–æ–Ω—Ñ–ª–∏–∫—Ç—ã –∏ —Å—Ä—ã–≤—ã. –ú–∞—Ä—Å –Ω–µ –æ—Ç—Å—Ç—É–ø–∞–µ—Ç üî• –£–∑–Ω–∞–π...',
      titleLen: 18,
      bodyLen: 82, // –æ–±—Ä–µ–∑–∞–µ—Ç—Å—è!
      problems: ['Body –æ–±—Ä–µ–∑–∞–µ—Ç—Å—è!', '–ù–µ—Ç –∞–Ω–∞–ª–∏–∑–∞ –≥–æ—Ä–æ—Å–∫–æ–ø–∞', '–ì–µ–Ω–µ—Ä–∏—á–µ—Å–∫–∏–π —Ç–µ–∫—Å—Ç']
    },
    new: {
      title: '–í–µ–Ω–µ—Ä–∞ –æ–±–µ—â–∞–µ—Ç',
      body: '–í–µ—á–µ—Ä–æ–º –≤—ã–¥–æ—Ö–Ω—ë—à—å, –æ–±–µ—â–∞–µ—Ç –í–µ–Ω–µ—Ä–∞! ‚ú®',
      titleLen: 14,
      bodyLen: 36,
      improvements: ['–ü–æ–º–µ—â–∞–µ—Ç—Å—è –≤ UI', '–í—ã—Ç–∞—â–µ–Ω–∞ —Å—É—Ç—å –∏–∑ –≥–æ—Ä–æ—Å–∫–æ–ø–∞', '–ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π —Å–æ–≤–µ—Ç']
    }
  },
  {
    type: 'period_forecast (3 –¥–Ω—è –¥–æ –º–µ–Ω—Å—Ç—Ä—É–∞—Ü–∏–∏)',
    old: {
      title: '–í–∞—Å–∏–ª–∏—Å–∞ –ú–µ–Ω—Å—Ç—Ä—É–∞–ª—å–Ω–∞—è',
      body: '–ù–∞—Å—Ç—é—à, —à—Ç–æ—Ä–º –∏–¥—ë—Ç! üåÄ –ì—Ä–µ–ª–∫—É –¥–æ—Å—Ç–∞–≤–∞–π, —à–æ–∫–æ–ª–∞–¥ –ø—Ä–∏–ø–∞—Å–∞–π. –ß–µ—Ä–µ–∑ 4 –¥–Ω—è –Ω–∞—á–Ω—ë—Ç—Å—è...',
      titleLen: 22,
      bodyLen: 78, // –æ–±—Ä–µ–∑–∞–µ—Ç—Å—è!
      problems: ['Body –æ–±—Ä–µ–∑–∞–µ—Ç—Å—è!', '–°–ª–∏—à–∫–æ–º –ø–æ–¥—Ä–æ–±–Ω–æ', '–ü–æ–≤—Ç–æ—Ä–µ–Ω–∏—è']
    },
    new: {
      title: '–ó–æ—è –ü–ú–°–æ–≤–∞',
      body: '–ù–∞—Å—Ç—é—Ö, —à—Ç–æ—Ä–º —á–µ—Ä–µ–∑ 3 –¥–Ω—è ‚Äî –∑–∞–ø–∞—Å–∞–π—Å—è! üôÑ',
      titleLen: 10,
      bodyLen: 41,
      improvements: ['–ü–æ–º–µ—â–∞–µ—Ç—Å—è –≤ UI', '–ö—Ä–∞—Ç–∫–∏–π –∏ —ë–º–∫–∏–π', '–°–æ—Ö—Ä–∞–Ω—ë–Ω —Å–∞—Ä–∫–∞–∑–º']
    }
  },
  {
    type: 'fertile_window (—Ñ–µ—Ä—Ç–∏–ª—å–Ω–æ–µ –æ–∫–Ω–æ)',
    old: {
      title: '–õ—é–¥–º–∏–ª–∞ –§–µ—Ä—Ç–∏–ª—å–Ω–∞—è',
      body: '–ù–∞—Å—Ç—é—à, —ç—Ç–æ –õ—é–¥–º–∏–ª–∞ –§–µ—Ä—Ç–∏–ª—å–Ω–∞—è: –∑–æ–Ω–∞ —Ä–∏—Å–∫–∞, –±–µ–∑ –∑–∞—â–∏—Ç—ã –Ω–∏ —à–∞–≥—É. üíã',
      titleLen: 18,
      bodyLen: 67, // –¥–ª–∏–Ω–Ω–æ–≤–∞—Ç–æ
      problems: ['–ù–µ–º–Ω–æ–≥–æ –¥–ª–∏–Ω–Ω–æ', '–ò–∑–±—ã—Ç–æ—á–Ω–æ–µ "—ç—Ç–æ –õ—é–¥–º–∏–ª–∞"']
    },
    new: {
      title: '–õ—é–¥–º–∏–ª–∞ –§–µ—Ä—Ç–∏–ª—å–Ω–∞—è',
      body: '–ù–∞—Å—Ç—é—à, –∑–æ–Ω–∞ —Ä–∏—Å–∫–∞ ‚Äî –∑–∞—â–∏—â–∞–π—Å—è! üíã',
      titleLen: 18,
      bodyLen: 34,
      improvements: ['–ü–æ–º–µ—â–∞–µ—Ç—Å—è –≤ UI', '–£–±—Ä–∞–Ω–æ –ª–∏—à–Ω–µ–µ', '–ü—Ä—è–º–æ–π –ø—Ä–∏–∑—ã–≤']
    }
  },
  {
    type: 'period_delay_warning (–∑–∞–¥–µ—Ä–∂–∫–∞)',
    old: {
      title: '–†–∏–º–º–∞ –¢—Ä–µ–≤–æ–∂–Ω–∞—è',
      body: '–ù–∞—Å—Ç—é—à, –†–∏–º–º–∞ –¢—Ä–µ–≤–æ–∂–Ω–∞—è –≤ –ø–∞–Ω–∏–∫–µ: —É–∂ –±–æ–ª—å–Ω–æ —Ç—è–Ω–µ—Ç, –º–æ–∂–µ—Ç, —Ç–µ—Å—Ç –Ω–∞ –≤—Å—è–∫–∏–π? üò¨',
      titleLen: 15,
      bodyLen: 78, // –æ–±—Ä–µ–∑–∞–µ—Ç—Å—è!
      problems: ['Body –æ–±—Ä–µ–∑–∞–µ—Ç—Å—è!', '–ü–æ–≤—Ç–æ—Ä–µ–Ω–∏–µ –∏–º–µ–Ω–∏', '–°–ª–∏—à–∫–æ–º –¥–ª–∏–Ω–Ω–æ']
    },
    new: {
      title: '–†–∏–º–º–∞ –¢—Ä–µ–≤–æ–∂–Ω–∞—è',
      body: '–ù–∞—Å—Ç—é—à, 4 –¥–Ω—è —Ç—è–Ω–µ—Ç ‚Äî –º–æ–∂–µ—Ç, —Ç–µ—Å—Ç? üò¨',
      titleLen: 15,
      bodyLen: 37,
      improvements: ['–ü–æ–º–µ—â–∞–µ—Ç—Å—è –≤ UI', '–£–±—Ä–∞–Ω–æ –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏–µ', '–ö–æ–Ω–∫—Ä–µ—Ç–Ω–∞—è —Ü–∏—Ñ—Ä–∞']
    }
  }
];

console.log('‚ïê'.repeat(90));
console.log('–°–†–ê–í–ù–ï–ù–ò–ï: –°–¢–ê–†–´–ï vs –ù–û–í–´–ï –£–í–ï–î–û–ú–õ–ï–ù–ò–Ø');
console.log('‚ïê'.repeat(90));
console.log();

comparisons.forEach((item, index) => {
  console.log(`\n${index + 1}. ${item.type.toUpperCase()}`);
  console.log('‚îÄ'.repeat(90));

  // OLD
  console.log('\n‚ùå –°–¢–ê–†–´–ô –í–ê–†–ò–ê–ù–¢ (–î–û –ò–ó–ú–ï–ù–ï–ù–ò–ô):');
  console.log(`   Title: "${item.old.title}" (${item.old.titleLen} —Å–∏–º–≤–æ–ª–æ–≤)`);
  console.log(`   Body:  "${item.old.body}" (${item.old.bodyLen} —Å–∏–º–≤–æ–ª–æ–≤)`);
  if (item.old.bodyLen > 55) {
    console.log(`   ‚ö†Ô∏è  –û–ë–†–ï–ó–ê–ï–¢–°–Ø! –ü—Ä–µ–≤—ã—à–µ–Ω–∏–µ –Ω–∞ ${item.old.bodyLen - 55} —Å–∏–º–≤–æ–ª–æ–≤`);
  }
  console.log('\n   –ü—Ä–æ–±–ª–µ–º—ã:');
  item.old.problems.forEach(p => console.log(`   ‚Ä¢ ${p}`));

  // NEW
  console.log('\n‚úÖ –ù–û–í–´–ô –í–ê–†–ò–ê–ù–¢ (–ü–û–°–õ–ï –ò–ó–ú–ï–ù–ï–ù–ò–ô):');
  console.log(`   Title: "${item.new.title}" (${item.new.titleLen} —Å–∏–º–≤–æ–ª–æ–≤)`);
  console.log(`   Body:  "${item.new.body}" (${item.new.bodyLen} —Å–∏–º–≤–æ–ª–æ–≤)`);
  console.log(`   ‚úì –£–∫–ª–∞–¥—ã–≤–∞–µ—Ç—Å—è –≤ –ª–∏–º–∏—Ç (‚â§55 —Å–∏–º–≤–æ–ª–æ–≤)`);
  console.log('\n   –£–ª—É—á—à–µ–Ω–∏—è:');
  item.new.improvements.forEach(i => console.log(`   ‚Ä¢ ${i}`));

  console.log();
});

console.log('‚ïê'.repeat(90));
console.log('–ò–¢–û–ì–û–í–ê–Ø –°–¢–ê–¢–ò–°–¢–ò–ö–ê:');
console.log('‚îÄ'.repeat(90));

const oldProblems = comparisons.filter(c => c.old.bodyLen > 55).length;
const newProblems = comparisons.filter(c => c.new.bodyLen > 55).length;

console.log(`\n–°—Ç–∞—Ä—ã–π –ø–æ–¥—Ö–æ–¥: ${oldProblems}/${comparisons.length} —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –æ–±—Ä–µ–∑–∞–ª–∏—Å—å`);
console.log(`–ù–æ–≤—ã–π –ø–æ–¥—Ö–æ–¥:  ${newProblems}/${comparisons.length} —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –æ–±—Ä–µ–∑–∞–ª–∏—Å—å`);
console.log();

const avgOldLen = Math.round(comparisons.reduce((sum, c) => sum + c.old.bodyLen, 0) / comparisons.length);
const avgNewLen = Math.round(comparisons.reduce((sum, c) => sum + c.new.bodyLen, 0) / comparisons.length);

console.log(`–°—Ä–µ–¥–Ω—è—è –¥–ª–∏–Ω–∞ body (—Å—Ç–∞—Ä—ã–π): ${avgOldLen} —Å–∏–º–≤–æ–ª–æ–≤`);
console.log(`–°—Ä–µ–¥–Ω—è—è –¥–ª–∏–Ω–∞ body (–Ω–æ–≤—ã–π):  ${avgNewLen} —Å–∏–º–≤–æ–ª–æ–≤`);
console.log(`–≠–∫–æ–Ω–æ–º–∏—è: ${avgOldLen - avgNewLen} —Å–∏–º–≤–æ–ª–æ–≤ (~${Math.round((1 - avgNewLen/avgOldLen) * 100)}%)`);
console.log();

console.log('–ö–õ–Æ–ß–ï–í–´–ï –£–õ–£–ß–®–ï–ù–ò–Ø:');
console.log('‚úì Morning brief —Ç–µ–ø–µ—Ä—å –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç –≥–æ—Ä–æ—Å–∫–æ–ø –∏ –≤—ã—Ç–∞—Å–∫–∏–≤–∞–µ—Ç –∫–æ–Ω–∫—Ä–µ—Ç–∏–∫—É');
console.log('‚úì –£–±—Ä–∞–Ω—ã –¥–ª–∏–Ω–Ω—ã–µ –≤–≤–æ–¥–Ω—ã–µ —Ñ—Ä–∞–∑—ã ("–≥–æ—Ä–æ—Å–∫–æ–ø –æ–±–µ—â–∞–µ—Ç", "—Å–µ–≥–æ–¥–Ω—è—à–Ω–∏–π –≥–æ—Ä–æ—Å–∫–æ–ø")');
console.log('‚úì –£–±—Ä–∞–Ω—ã –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏—è –∏–º—ë–Ω –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π –≤ body');
console.log('‚úì –í—Å–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è —Ç–µ–ø–µ—Ä—å –ø–æ–º–µ—â–∞—é—Ç—Å—è –≤ –∫–∞—Ä—Ç–æ—á–∫—É –±–µ–∑ –æ–±—Ä–µ–∑–∫–∏');
console.log('‚úì –°–æ—Ö—Ä–∞–Ω—ë–Ω —Å–∞—Ä–∫–∞—Å—Ç–∏—á–Ω—ã–π —Ç–æ–Ω –∏ –ø—Ä—è–º–æ–µ –æ–±—Ä–∞—â–µ–Ω–∏–µ –∫ –ù–∞—Å—Ç–µ');
console.log('‚ïê'.repeat(90));
